{"version":3,"sources":["components/Page.tsx","util/http/index.ts","util/http/http-resource.ts","util/http/category-http.ts","theme.ts","components/Badge.tsx","components/Table/DebouncedTableSearch.js","components/Table/index.tsx","components/Table/FilterResetButton.tsx","store/filter/index.ts","hooks/useFilter.ts","util/vendor/yup.ts","components/loading/LoadingContext.tsx","pages/category/Table.tsx","pages/category/PagList.tsx","components/SubmitActions.tsx","components/DafaultForm.tsx","pages/category/Form.tsx","pages/category/PageForm.tsx","util/http/genre-http.ts","pages/genre/Table.tsx","pages/genre/PageList.tsx","pages/genre/Form.tsx","pages/genre/PageForm.tsx","util/http/cast-member-http.ts","pages/cast-member/Table.tsx","pages/cast-member/PageList.tsx","pages/cast-member/Form.tsx","pages/cast-member/PageForm.tsx","util/http/video-http.ts","util/models.ts","components/Rating.tsx","pages/video/Form/RatingField.tsx","components/InputFile.tsx","pages/video/Form/UploadField.tsx","components/AsyncAutocomplete.tsx","components/GridSelected.tsx","components/GridSelectedItem.tsx","hooks/useCollectionManager.ts","hooks/useHttpHandled.ts","util/model-filters.ts","pages/video/Form/GenreField.tsx","pages/video/Form/CategoryField.tsx","pages/video/Form/CastMemberField.tsx","hooks/useSnackbarFormError.ts","store/upload/getters.ts","components/UploadProgress.tsx","store/upload/index.ts","components/SnackbarUpload/UploadAction.tsx","components/SnackbarUpload/UploadItem.tsx","components/SnackbarUpload/index.tsx","pages/video/Form/index.tsx","pages/video/PageForm.tsx","components/DeleteDialog.tsx","hooks/useDeleteCollection.ts","pages/video/Table.tsx","pages/video/PageList.tsx","pages/Dashboard.tsx","pages/uploads/UploadAction.tsx","pages/uploads/UploadItem.tsx","pages/uploads/index.tsx","routes/index.tsx","components/Navbar/Menu.tsx","components/Navbar/index.tsx","static/img/logo.png","routes/AppRoute.tsx","components/Breadcrumb.tsx","components/SnackBarProvider.tsx","components/Spinner.tsx","components/loading/LoadingProvider.tsx","App.tsx","reportWebVitals.js","store/upload/sagas.ts","store/root-saga.ts","store/index.ts","index.tsx"],"names":["useStyles","makeStyles","title","color","Page","props","classes","Container","maxWidth","Typography","className","variant","Box","paddingTop","children","httpVideo","axios","create","baseURL","process","instances","console","log","HttpResource","http","resource","cancelList","options","this","cancel","CancelToken","source","config","cancelToken","token","queryParams","params","get","id","data","sendData","makeSendData","post","containsFile","getFormData","usePost","put","patch","delete","error","isCancel","serialize","booleansAsIntegers","Object","values","filter","el","File","length","categoryHttp","palette","primary","main","contrastText","secondary","dark","background","default","success","green","red","theme","createMuiTheme","overrides","MUIDataTable","paper","boxShadow","MUIDataTableToolbar","root","minHeight","backgroundColor","icon","iconActive","MUIDataTableHeadCell","fixedHeader","paddingBottom","sortActive","sortAction","alignItems","sortLabelRoot","MUIDataTableSelectCell","headerCell","MUIDataTableBodyCell","MUIDataTableToolbarSelect","iconButton","MUIDataTableBodyRow","MUIDataTablePagination","MUIDataTableFilterList","marginBottom","localTheme","BadgeYes","Chip","label","BadgeNo","DebouncedTableSearch","handleTextChange","event","value","target","setState","text","debouncedOnSearch","onSearch","onKeyDown","keyCode","onHide","searchText","undefined","state","debounce","bind","debounceTime","prevProps","prevState","snapshot","document","addEventListener","removeEventListener","Grow","appear","in","timeout","ref","rootRef","searchIcon","TextField","autoFocus","InputProps","textLabels","toolbar","search","inputProps","onChange","fullWidth","inputRef","searchField","placeholder","searchPlaceholder","IconButton","clearIcon","onClick","React","PureComponent","withStyles","display","flex","marginTop","marginRight","name","Table","debouncedSearchTime","columns","cloneDeep","useTheme","isSmOrDown","useMediaQuery","breakpoints","down","defaultOptions","print","download","body","noMatch","toolTip","pagination","next","previous","rowsPerPage","displayRows","downloadCsv","viewColumns","filterTable","all","reset","titleAria","selectedRows","deleteAria","customSearchRender","handleSearch","hideSearch","newProps","merge","forEach","column","key","width","setColumnsWidth","map","omit","loading","applyLoading","responsive","originalProps","makeActionStyle","copyTheme","selector","FilterResetButton","Tooltip","handleClick","createActions","setSearch","setPage","setPerPage","setOrder","setReset","updateExtraFilter","Types","Creators","INITIAL_STATE","page","per_page","order","sort","dir","reducer","createReducer","SET_SEARCH","action","payload","SET_PAGE","SET_PER_PAGE","SET_ORDER","SET_RESET","UPDATE_EXTRA_FILTER","extraFilter","useFilter","history","useHistory","location","useLocation","locationSearch","locationPathname","pathname","locationState","rowsPerPageOptions","schema","useMemo","yup","shape","transform","isNaN","parseInt","includes","nullable","toLowerCase","createValidationSchema","stateFromURL","URLSearchParams","substr","cast","getStateFromURL","cleanSearchText","useCallback","newText","formatSearchParams","useReducer","filterState","dispatch","filterManager","FilterManager","useState","totalRecords","setTotalRecords","useDebounce","debouncedFilterState","useEffect","replace","newLocation","oldState","nextState","isEqual","push","applyOrderInColumns","setLocale","mixed","required","notType","string","max","number","min","addMethod","test","message","tableRef","current","changeRowsPerPage","changePage","perPage","changedColumn","direction","resetTablePagination","update","sortOrder","LoadingContext","createContext","columnsDefinition","filterOptions","names","customBodyRender","tableMeta","updateValue","format","parseISO","component","Link","to","rowData","snackbar","useSnackbar","subscribed","useRef","setData","useContext","a","list","meta","total","isCancelledRequest","enqueueSnackbar","getData","serverSide","count","customToolbar","resetFilter","onSearchChange","changeSearch","onChangePage","onChangeRowsPerPage","onColumnSortChange","changeColumnSort","PagList","Fab","size","Add","submit","margin","spacing","SubmitActions","buttonProps","disabled","disabledButtons","Button","handleSave","type","gridItem","padding","DefaultForm","GridContainerProps","GridItemProps","others","Grid","container","item","validationSchema","Form","useForm","resolver","yupResolver","defaultValues","is_active","register","handleSubmit","getValues","setValue","errors","watch","trigger","useParams","category","setCategory","onSubmit","formData","setTimeout","xs","md","helperText","InputLabelProps","shrink","multiline","rows","FormControlLabel","control","Checkbox","checked","labelPlacement","then","isValid","PageForm","genreHttp","filterType","categories","split","debouncedState","join","setLoading","indexColumnCategories","findIndex","c","columnCategories","categoriesFilterValue","filterList","serverSideFilterList","isSubscribed","JSON","stringify","onFilterChange","FilterList","columnIndex","changeExtraFilter","categories_id","genre","setGenre","setCategories","promises","Promise","categoriesResponse","genreResponse","select","e","SelectProps","multiple","MenuItem","castMemberHttp","CastMemberTypeMap","0","1","castMemberNames","indexColumnType","columnType","typeFilterValue","invert","castMember","setCastMember","getCastMember","FormControl","FormLabel","RadioGroup","Radio","FormHelperText","videoHttp","VideoFileFieldsMap","height","fontSize","borderRadius","justifyContent","backgroundColors","Rating","style","rating","ratings","RatingField","formControlProps","row","InputFile","forwardRef","fileRef","filename","setFilename","textFieldProps","TextFieldProps","readOnly","endAdornment","InputAdornment","position","ButtonFile","inputFileProps","hidden","files","Array","from","file","InputFileProps","useImperativeHandle","openWindow","click","clear","UploadField","accept","endIcon","AsyncAutocomplete","AutoCompleteProps","fetchOptions","onOpen","onClose","onInputChange","freeSolo","open","setOpen","setSearText","debouncedSearchText","setOptions","autocompleteProps","loadingText","noOptionsText","inputValue","renderInput","CircularProgress","Autocomplete","createStyles","GridSelected","wrap","GridSelectedItem","onDelete","other","useCollectionManager","collection","setCollection","addItem","find","i","unshift","removeItem","index","splice","useHttpHandled","request","getGenresFromCategory","genres","cat","GenreField","setGenres","removeCategory","autocompleteHttp","autocompleteRef","catch","autoSelect","clearOnEscape","getOptionLabel","option","FormControlProps","genresFromCategory","genresSubtitle","grey","CategoryField","noWrap","CastMemberField","castMembers","setCastMembers","useSnackbarFormError","submitCount","hasError","keys","isFinished","obj","progress","isUploadType","some","progressContainer","left","progressBackground","UploadProgress","uploadOrFile","Fade","enter","exit","addUpload","removeUpload","updateProgress","setUploadError","uploads","ADD_UPLOAD","findIndexUpload","video","$splice","fileField","REMOVE_UPLOAD","upload","UPDATE_PROGRESS","videoId","findIndexUploadAndFiles","indexUpload","indexFile","$apply","$set","calculateGlobalProgress","SET_UPLOAD_ERROR","findIndexFiles","countFiles","reduce","sum","successIcon","errorIcon","UploadAction","hover","useDispatch","show","setShow","debouncedShow","ListItemSecondaryAction","edge","listItem","movieIcon","minWidth","listItemText","marginLeft","UploadItem","itemHover","setItemHover","disableFocusListener","disableTouchListener","placement","ListItem","button","onMouseOver","onMouseLeave","ListItemIcon","ListItemText","Divider","card","cardActionRoot","fontWeight","icons","expand","transition","transitions","duration","shortest","expandOpen","SnackbarUpload","closeSnackbar","expanded","setExpanded","useSelector","totalInProgress","countInProgress","Card","CardActions","classnames","Collapse","List","cardUpload","cardOpened","cardContentOpened","description","year_launched","cast_members","every","v","parent","fileFields","opened","formState","setVideo","isGreaterMd","up","castMemberRef","genreRef","categoryRef","uploadsRef","zipObject","createRef","resetForm","field","cast_member","uploadFiles","persist","anchorOrigin","vertical","horizontal","content","CardContent","DeleteDialog","handleClose","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","useDeleteCollection","openDeleteDialog","setOpenDeleteDialog","lookup","rowsToDelete","setRowsToDelete","confirmed","ids","deleteCollection","response","onRowsDelete","rowsDeleted","Dashboard","divider","activeActions","orientation","gridTitle","justify","panelSummary","expandedIcon","routes","path","exact","CategoryList","CategoryForm","GenreList","GenreForm","CastMemberList","CastMemberForm","VideoList","VideoForm","elevation","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpansionPanelDetails","listRoutes","menuRoutes","route","Menu","anchorEl","setAnchorEl","Boolean","aria-label","aria-controls","aria-haspopup","currentTarget","MenuRounded","transformOrigin","getContentAnchorEl","routeName","flexGrow","textAlign","logo","Navbar","AppBar","Toolbar","src","alt","AppRoute","breadcrumbNameMap","linkRouter","LinkRouter","RouterLink","Breadcrumb","pathnames","x","Breadcrumbs","last","slice","RouteParser","match","makeBreadcrumb","variantSuccess","variantError","variantInfo","SnackBarProvider","snackbarProviderRef","defaultProps","autoHideDuration","maxSnack","preventDuplicate","makeLocalTheme","Spinner","LinearProgress","zIndex","LoadingProvider","countRequest","setCountRequest","decrementCountRequest","prevCountRequest","requestIds","onFulfilled","onRejected","interceptors","use","addGlobalRequestInterceptor","headers","hasOwnProperty","responseIds","addGlobalResponseInterceptor","reject","eject","removeGlobalResponseInterceptor","Provider","App","Fragment","CssBaseline","basename","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","uploadWatcherSaga","uploadFile","actionChannel","newFilesChannel","take","fileInfo","call","f","sendUpload","channel","eventChannel","emitter","partialUpdate","_method","onUploadProgress","progressEvent","lengthComputable","loaded","finally","END","rootSaga","sagaMiddleware","createSagaMiddleware","store","createStore","combineReducers","applyMiddleware","run","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.acc611b6.chunk.js","sourcesContent":["// @flow \nimport * as React from 'react';\nimport { Box, Container, makeStyles, Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n    title: {\n        color: '#99999999'\n    }\n})\n\ntype PageProps = {\n    title: string\n};\nexport const Page: React.FC<PageProps> = (props) => {\n    const classes = useStyles();\n\n    return (\n        <Container maxWidth={'xl'}>\n            <Typography className={classes.title} variant='h5'>\n                {props.title}\n            </Typography>\n            <Box paddingTop={2}>\n              {props.children}\n            </Box>\n        </Container>\n    );\n};","import axios, { AxiosError, AxiosRequestConfig, AxiosResponse } from 'axios';\n\nexport const httpVideo = axios.create({\n    baseURL: process.env.REACT_APP_MICRO_VIDEO_API_URL\n});\n\nconst instances = [httpVideo];\n\nconsole.log('httpVideo')\nexport function addGlobalRequestInterceptor(\n    onFulfilled?: (value: AxiosRequestConfig) => AxiosRequestConfig | Promise<AxiosRequestConfig>, \n    onRejected?: (error: any) => any\n) {\n    const ids: number[] = [];\n    for(let i of instances) {\n        const id = i.interceptors.request.use(onFulfilled, onRejected)\n        ids.push(id);\n    }\n    return ids;\n}\n\nexport function removeGlobalRequestInterceptor(ids: number[]) {\n    ids.forEach(\n        (id: number, index: number) => instances[index].interceptors.request.eject(id)\n    );\n}\n\nexport function addGlobalResponseInterceptor(\n    onFulfilled?: (value: AxiosResponse) => AxiosResponse | Promise<AxiosResponse>, \n    onRejected?: (error: AxiosError) => any\n) {\n    const ids: number[] = [];\n    for(let i of instances) {\n        const id = i.interceptors.response.use(onFulfilled, onRejected)\n        ids.push(id);\n    }\n    return ids;\n}\n\nexport function removeGlobalResponseInterceptor(ids: number[]) {\n    ids.forEach(\n        (id: number, index: number) => instances[index].interceptors.response.eject(id)\n    );\n}","import { AxiosInstance, AxiosRequestConfig, AxiosResponse, CancelTokenSource } from \"axios\";\nimport axios from 'axios';\nimport { serialize } from 'object-to-formdata';\n\nexport default class HttpResource {\n\n    private cancelList: CancelTokenSource | null = null;\n\n    constructor(protected http: AxiosInstance, protected resource ) { }\n\n    list<T = any>(options?: { queryParams? }): Promise<AxiosResponse<T>> {\n\n        if (this.cancelList) {\n            this.cancelList.cancel('list cancelled');\n        }\n        this.cancelList = axios.CancelToken.source();\n\n        const config: AxiosRequestConfig = {\n            cancelToken: this.cancelList.token,\n        }\n        if ( options && options.queryParams) {\n            config.params = options.queryParams;\n        }\n\n        return this.http.get<T>(this.resource, config);\n    }\n\n    get<T = any>(id): Promise<AxiosResponse<T>> {\n        return this.http.get<T>(`${this.resource}/${id}`);\n    }\n\n    create<T = any>(data): Promise<AxiosResponse<T>> {\n        let sendData = this.makeSendData(data);\n        return this.http.post<T>(this.resource, sendData);\n    }\n\n    update<T = any>(id, data, options?: { http?: { usePost: boolean }, config?: AxiosRequestConfig }): Promise<AxiosResponse<T>> {\n        let sendData = data;\n        if (this.containsFile(data)) {\n            sendData = this.getFormData(data);\n        }\n        const {http, config} = (options || {}) as any;\n        return !options || !http || !http.usePost\n            ? this.http.put<T>(`${this.resource}/${id}`, sendData, config)\n            : this.http.post<T>(`${this.resource}/${id}`, sendData, config)\n    }\n\n    partialUpdate<T = any>(id, data, options?: { http?: { usePost: boolean }, config?: AxiosRequestConfig }): Promise<AxiosResponse<T>> {\n        let sendData = data;\n        if (this.containsFile(data)) {\n            sendData = this.getFormData(data);\n        }\n        const {http, config} = (options || {}) as any;\n        return !options || !http || !http.usePost\n            ? this.http.patch<T>(`${this.resource}/${id}`, sendData, config)\n            : this.http.post<T>(`${this.resource}/${id}`, sendData, config)\n    }\n\n\n    delete<T = any>(id): Promise<AxiosResponse<T>> {\n        return this.http.delete<T>(`${this.resource}/${id}`);\n    }\n\n    deleteCollection<T = any>(queryParams): Promise<AxiosResponse<T>> {\n        const config: AxiosRequestConfig = {};\n        if (queryParams) {\n            config['params'] = queryParams\n        }\n        return this.http.delete<T>(`${this.resource}`, config);\n    }\n\n    isCancelledRequest(error) {\n        return axios.isCancel(error);\n    }\n    private makeSendData(data) {\n        return this.containsFile(data) ? this.getFormData(data): data;\n    }\n\n    private getFormData(data) {\n        // const formData = new FormData();\n        // Object\n        //     .keys(data)\n        //     .forEach(key => {\n        //         let value = data[key];\n        //         if(typeof value === 'undefined') {\n        //             return;\n        //         }\n        //         if (typeof value === 'boolean') {\n        //             value = value ? 1 : 0;\n        //         }\n        //         if (value instanceof Array) {\n        //             value.forEach(v => formData.append(`${key}[]`, v))\n        //             return;\n        //         }\n        //         formData.append(key, value)\n        //     })\n        return serialize(data, { booleansAsIntegers: true });\n    }\n\n    private containsFile(data) {\n        return Object\n            .values(data)\n            .filter(el => el instanceof File).length !== 0\n    }\n}","import { httpVideo } from \".\";\nimport HttpResource from \"./http-resource\";\n\nconst categoryHttp = new HttpResource(httpVideo, \"categories\");\n\nexport default categoryHttp;","import {createMuiTheme} from \"@material-ui/core\";\nimport {PaletteOptions, SimplePaletteColorOptions} from \"@material-ui/core/styles/createPalette\";\nimport {green, red} from \"@material-ui/core/colors\";\n\nconst palette: PaletteOptions = {\n    primary: {\n        main: '#79aec8',\n        contrastText: '#fff'\n    },\n    secondary: {\n        main: '#4db5ab',\n        contrastText: '#fff',\n        dark: \"#055a52\"\n    },\n    background: {\n        default: '#fafafa'\n    },\n    success: {\n        main: green[\"500\"],\n        contrastText: '#fff'\n    },\n    error: {\n        main: red[\"500\"]\n    },\n};\n\nconst theme = createMuiTheme({\n    palette,\n    overrides: {\n        MUIDataTable: {\n            paper: {\n                boxShadow: \"none\",\n            }\n        },\n        MUIDataTableToolbar: {\n            root: {\n                minHeight: '58px',\n                backgroundColor: palette!.background!.default\n            },\n            icon: {\n                color: (palette!.primary as SimplePaletteColorOptions).main,\n                '&:hover, &:active, &.focus': {\n                    color: (palette!.secondary as SimplePaletteColorOptions).dark\n                },\n            },\n            iconActive: {\n                color: (palette!.secondary as SimplePaletteColorOptions).dark,\n                '&:hover, &:active, &.focus': {\n                    color: (palette!.secondary as SimplePaletteColorOptions).dark\n                },\n            }\n        },\n        MUIDataTableHeadCell: {\n            fixedHeader: {\n                paddingTop: 8,\n                paddingBottom: 8,\n                backgroundColor: (palette!.primary as SimplePaletteColorOptions).main,\n                color: '#ffffff',\n                '&[aria-sort]':{\n                    backgroundColor: '#459ac4',\n                }\n            },\n            sortActive: {\n                color: '#fff'\n            },\n            sortAction:{\n                alignItems: 'center'\n            },\n            sortLabelRoot: {\n                '& svg': {\n                    color: '#fff !important'\n                }\n            }\n        },\n        MUIDataTableSelectCell: {\n            headerCell: {\n                backgroundColor: (palette!.primary as SimplePaletteColorOptions).main,\n                '& span': {\n                    color: '#fff !important'\n                }\n            },\n        },\n        MUIDataTableBodyCell: {\n            root: {\n                color: (palette!.secondary as SimplePaletteColorOptions).main,\n                '&:hover, &:active, &.focus': {\n                    color: (palette!.secondary as SimplePaletteColorOptions).main,\n                },\n            },\n        },\n        MUIDataTableToolbarSelect:{\n            title: {\n                color: (palette!.primary as SimplePaletteColorOptions).main,\n            },\n            iconButton:{\n                color: (palette!.primary as SimplePaletteColorOptions).main,\n            }\n        },\n        MUIDataTableBodyRow: {\n            root: {\n                '&:nth-child(odd)': {\n                    backgroundColor: palette!.background!.default\n                }\n            }\n        },\n        MUIDataTablePagination: {\n            root: {\n                color: (palette!.primary as SimplePaletteColorOptions).main,\n            }\n        },\n        MUIDataTableFilterList: {\n            root: {\n                marginBottom: '16px'\n            }\n        }\n    }\n});\n\nexport default theme;\n","import { Chip, createMuiTheme, MuiThemeProvider } from '@material-ui/core';\nimport * as React from 'react';\nimport theme from '../theme';\n\nconst localTheme = createMuiTheme({\n    palette: {\n        primary: theme.palette.success,\n        secondary: theme.palette.error\n    }\n})\n\nexport const BadgeYes = () => {\n    return (\n        <MuiThemeProvider theme={localTheme}>\n            <Chip label=\"Sim\" color={'primary'}/>\n        </MuiThemeProvider>\n    );\n};\n\nexport const BadgeNo = () => {\n    return (\n        <MuiThemeProvider theme={localTheme}>\n            <Chip label=\"Nao\" color={'secondary'}/>\n        </MuiThemeProvider>\n    );\n};","/* eslint-disable no-undef */\nimport React from 'react';\nimport Grow from '@material-ui/core/Grow';\nimport TextField from '@material-ui/core/TextField';\nimport SearchIcon from '@material-ui/icons/Search';\nimport IconButton from '@material-ui/core/IconButton';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { withStyles } from '@material-ui/core/styles';\nimport {debounce} from 'lodash'\n\nconst defaultSearchStyles = theme => ({\n  main: {\n    display: 'flex',\n    flex: '1 0 auto',\n  },\n  searchIcon: {\n    color: theme.palette.text.secondary,\n    marginTop: '10px',\n    marginRight: '8px',\n  },\n  searchText: {\n    flex: '0.8 0',\n  },\n  clearIcon: {\n    '&:hover': {\n      color: theme.palette.error.main,\n    },\n  },\n});\n\n\nclass DebouncedTableSearch extends React.PureComponent {\n\n    constructor(props){\n        super(props)\n        const { searchText } = this.props;\n        let value = searchText;\n        if(searchText && searchText.value !== undefined){\n            value = searchText.value\n        }\n        this.state = {\n            text: value\n        }\n        this.debouncedOnSearch = debounce(this.debouncedOnSearch.bind(this), this.props.debounceTime)\n    }\n\n    handleTextChange = event => {\n        const value = event.target.value\n        console.log(value);\n        this.setState({\n            text: value\n        }, () => this.debouncedOnSearch(value))\n    };\n\n    debouncedOnSearch = value => {\n        this.props.onSearch(value)\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot){\n        const { searchText } = this.props;\n        if(searchText && searchText.value !== undefined && prevProps.searchText !== this.props.searchText){\n            const value = searchText.value;\n            if (value) {\n                this.setState({\n                    text: value\n                }, () => this.props.onSearch(value));\n            } else {\n                try {\n                    this.props.onHide();\n                } catch (error) {\n                    console.log(error);\n                }\n            }\n            \n        }\n    }\n\n    componentDidMount() {\n        document.addEventListener('keydown', this.onKeyDown, false);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.onKeyDown, false);\n    }\n\n    onKeyDown = event => {\n        if (event.keyCode === 27) {\n        this.props.onHide();\n        }\n    };\n\n    render() {\n        const { classes, options, onHide } = this.props;\n        let value = this.state.text;\n        console.log(value);\n        return (\n        <Grow appear in={true} timeout={300}>\n            <div className={classes.main} ref={el => (this.rootRef = el)}>\n                <SearchIcon className={classes.searchIcon} />\n                <TextField\n                    className={classes.searchText}\n                    autoFocus={true}\n                    InputProps={{\n                    'data-test-id': options.textLabels.toolbar.search,\n                    }}\n                    inputProps={{\n                    'aria-label': options.textLabels.toolbar.search,\n                    }}\n                    value={value || ''}\n                    onChange={this.handleTextChange}\n                    fullWidth={true}\n                    inputRef={el => (this.searchField = el)}\n                    placeholder={options.searchPlaceholder}\n                />\n                <IconButton className={classes.clearIcon} onClick={onHide}>\n                    <ClearIcon />\n                </IconButton>\n            </div>\n        </Grow>\n        );\n    }\n}\n\nexport default withStyles(defaultSearchStyles, { name: 'MUIDataTableSearch' })(DebouncedTableSearch);","// @flow \nimport MUIDataTable, { MUIDataTableColumn, MUIDataTableOptions, MUIDataTableProps } from 'mui-datatables';\nimport * as React from 'react';\nimport { merge, omit, cloneDeep } from 'lodash';\nimport { MuiThemeProvider, Theme, useMediaQuery, useTheme } from '@material-ui/core';\nimport DebouncedTableSearch from './DebouncedTableSearch';\n\nconst makeDefaultOptions = (debouncedSearchTime?): MUIDataTableOptions => ({\n    print: false,\n    download: false,\n    textLabels: {\n        body: {\n            noMatch: \"Nenhum registro encontrado\",\n            toolTip: \"Classificar\"\n        },\n        pagination: {\n            next: \"Proxima pagina\",\n            previous: \"Pagina anterior\",\n            rowsPerPage: \"Por pagina\",\n            displayRows: \"de\"\n        },\n        toolbar: {\n            search: \"Busca\",\n            downloadCsv: \"Download CSV\",\n            print: \"Imprimir\",\n            viewColumns: \"Ver Colunas\",\n            filterTable: \"Filtrar Tabelas\",\n        },\n        filter: {\n            all: \"Todos\",\n            title: \"FILTROS\",\n            reset: \"LIMPAR\"\n        },\n        viewColumns: {\n            title: \"Ver Colunas\",\n            titleAria: \"Ver/Esconder Colunas da Tabela\"\n        },\n        selectedRows: {\n            text: \"registro(s) selecionados\",\n            delete: \"Excluir\",\n            deleteAria: \"Excluir registros selecionados\"\n        }\n    },\n    customSearchRender: (searchText, handleSearch, hideSearch, options) => {\n        return <DebouncedTableSearch\n            options={options}\n            searchText={searchText}\n            onSearch={handleSearch}\n            onHide={hideSearch}\n            debounceTime={debouncedSearchTime}\n        />\n    }\n});\n\nexport interface TableColumn extends MUIDataTableColumn {\n    width?: string;\n}\n\nexport interface MuiDataTableRefComponent {\n    changePage: (page: number) => void;\n    changeRowsPerPage: (rowsPerPage: number) => void;\n}\n\nexport interface TableProps extends MUIDataTableProps, React.RefAttributes<MuiDataTableRefComponent> {\n    columns: TableColumn[];\n    loading?: boolean;\n    debouncedSearchTime?: number;\n}\nconst Table = React.forwardRef<MuiDataTableRefComponent, TableProps>((props, ref) => {\n\n    function extractMUIDataTableColumns(columns: TableColumn[]): MUIDataTableColumn[] {\n        setColumnsWidth(columns);\n        return columns.map(column => omit(column, 'width'))\n    }\n\n    function setColumnsWidth(columns: TableColumn[]) {\n        columns.forEach((column, key) => {\n            if (column.width) {\n                const overrides = theme.overrides as any;\n\n                overrides.MUIDataTableHeadCell.fixedHeader[`&:nth-child(${key + 2})`] = {\n                    width: column.width\n                }\n            }\n        })\n    }\n\n    function applyLoading() {\n        const textLabels = (newProps.options as any).textLabels;\n        textLabels.body.noMatch = props.loading === true \n                                                    ? 'Carregando...'\n                                                    :  textLabels.body.noMatch;\n    }\n\n    function applyResponsive() {\n        newProps.options.responsive = isSmOrDown ? 'scrollMaxHeight' : 'stacked';\n    }\n\n    function getOriginalMuiDataTableProps() {\n        return {\n            ...omit(newProps, 'loading'),\n            ref\n        };\n    }\n\n    const theme = cloneDeep<Theme>(useTheme());\n    const isSmOrDown = useMediaQuery(theme.breakpoints.down('sm'));\n    \n    const defaultOptions = makeDefaultOptions(props.debouncedSearchTime);\n    \n    const newProps = merge(\n        { options: cloneDeep(defaultOptions) },\n        props,\n        { columns: extractMUIDataTableColumns(props.columns) }\n    );\n\n    applyLoading();\n    applyResponsive();\n\n    const originalProps = getOriginalMuiDataTableProps();\n\n    return (\n        <MuiThemeProvider theme={theme}>\n            <MUIDataTable {...originalProps} />\n        </MuiThemeProvider>\n    );\n});\n\nexport default Table;\n\nexport function makeActionStyle(column) {\n    \n    return theme => {\n        const copyTheme = cloneDeep(theme);\n        const selector = `&[data-colindex=\"MuiDataTableBodyCell-${column}\"]`;\n        (copyTheme.overrides as any).MUIDataTableBodyCell.root[selector] = {\n            paddingTop: '0px',\n            paddingBottom: '0px'\n        };\n        return copyTheme;\n    }\n}\n","// @flow \nimport { IconButton, makeStyles, Tooltip } from '@material-ui/core';\nimport * as React from 'react';\nimport ClearAllIcon from '@material-ui/icons/ClearAll';\n\nconst useStyles = makeStyles((theme) => ({\n    iconButton: (theme as any).overrides.MUIDataTableToolbar.icon\n}));\ninterface FilterResetButtonProps {\n    handleClick: () => void;\n}\nexport const FilterResetButton: React.FC<FilterResetButtonProps> = (props) => {\n    const classes = useStyles();\n    return (\n        <Tooltip title={'Limpar busca'}>\n            <IconButton className={classes.iconButton} onClick={props.handleClick}>\n                <ClearAllIcon/>\n            </IconButton>\n        </Tooltip>\n    );\n};","import {createActions, createReducer} from 'reduxsauce';\nimport * as Typings from './types';\n\nexport const {Types, Creators} = createActions<{\n    SET_SEARCH: string,\n    SET_PAGE: string,\n    SET_PER_PAGE: string,\n    SET_ORDER: string,\n    SET_RESET: string,\n    UPDATE_EXTRA_FILTER: string,\n}, {\n    setSearch(payload: Typings.SetSearchAction['payload']): Typings.SetSearchAction\n    setPage(payload: Typings.SetPageAction['payload']): Typings.SetPageAction\n    setPerPage(payload: Typings.SetPerPageAction['payload']): Typings.SetPerPageAction\n    setOrder(payload: Typings.SetOderAction['payload']): Typings.SetOderAction\n    setReset(payload: Typings.SetResetAction['payload']): Typings.SetResetAction,\n    updateExtraFilter(payload: Typings.UpdateExtraFilterAction['payload']): Typings.UpdateExtraFilterAction\n}>({\n    setSearch: ['payload'],\n    setPage: ['payload'],\n    setPerPage: ['payload'],\n    setOrder: ['payload'],\n    setReset: ['payload'],\n    updateExtraFilter: ['payload'],\n});\n\nconsole.log('Creators:', Creators)\n\nexport const INITIAL_STATE: Typings.State = {\n    search: null,\n    pagination: {\n        page: 1,\n        per_page: 10\n    },\n    order: {\n        sort: null,\n        dir: null,\n    }\n}\n\nconst reducer = createReducer<Typings.State, Typings.Actions>(INITIAL_STATE, {\n    [Types.SET_SEARCH]: setSearch as any,\n    [Types.SET_PAGE]: setPage as any,\n    [Types.SET_PER_PAGE]: setPerPage as any,\n    [Types.SET_ORDER]: setOrder as any,\n    [Types.SET_RESET]: setReset as any,\n    [Types.UPDATE_EXTRA_FILTER]: updateExtraFilter as any,\n});\n\nexport default reducer;\n\nfunction setSearch(state = INITIAL_STATE, action: Typings.SetSearchAction): Typings.State {\n    return {\n        ...state,\n        search: action.payload.search,\n        pagination: {\n            ...state.pagination,\n            page: 1\n        }\n    };\n}\n\nfunction setPage(state = INITIAL_STATE, action: Typings.SetPageAction): Typings.State {\n    return {\n        ...state,\n        pagination: {\n            ...state.pagination,\n            page: action.payload.page\n        }\n    };\n}\n\nfunction setPerPage(state = INITIAL_STATE, action: Typings.SetPerPageAction): Typings.State {\n    return {\n        ...state,\n        pagination: {\n            ...state.pagination,\n            per_page: action.payload.per_page\n        }\n    };\n}\n\nfunction setOrder(state = INITIAL_STATE, action: Typings.SetOderAction): Typings.State {\n    return {\n        ...state,\n        order: {\n            sort: action.payload.sort,\n            dir: action.payload.dir,\n        }\n    };\n}\n\nfunction setReset(state = INITIAL_STATE, action) {\n    return action.payload.state;\n}\n\nfunction updateExtraFilter(state = INITIAL_STATE, action: Typings.UpdateExtraFilterAction) {\n    return {\n        ...state,\n        extraFilter: {\n            ...state.extraFilter,\n            ...action.payload\n        }\n    }\n}","import { MUIDataTableColumn } from \"mui-datatables\";\nimport React, { Dispatch, Reducer, useCallback, useEffect, useMemo, useReducer, useState } from \"react\";\nimport reducer, { Creators } from \"../store/filter\";\nimport { Actions as FilterActions, State as FilterState } from \"../store/filter/types\";\nimport { useDebounce } from \"use-debounce\";\nimport { useHistory } from \"react-router\";\nimport { isEqual } from \"lodash\";\nimport * as yup from '../util/vendor/yup';\nimport { MuiDataTableRefComponent } from \"../components/Table\";\nimport { ObjectSchema } from \"../util/vendor/yup\";\nimport { useLocation } from \"react-router-dom\";\n\ninterface FilterManagerOptions {\n    schema: ObjectSchema<any>;\n    columns: MUIDataTableColumn[];\n    rowsPerPage: number;\n    tableRef: React.MutableRefObject<MuiDataTableRefComponent>;\n    dispatch: Dispatch<FilterActions>;\n    state: FilterState;\n}\n\ninterface ExtraFilter {\n    getStateFromURL: (queryParams: URLSearchParams) => any,\n    formatSearchParams: (debouncedState: FilterState) => any,\n    createValidationSchema: () => any,\n}\n\ninterface UseFilterOptions { \n    columns: MUIDataTableColumn[];\n    rowsPerPage: number;\n    rowsPerPageOptions: number[];\n    debounceTime: number;\n    tableRef: React.MutableRefObject<MuiDataTableRefComponent>;\n    extraFilter?: ExtraFilter; \n}\n\nexport default function useFilter(options: UseFilterOptions) {\n\n    const history = useHistory(); // mutable\n    const location = useLocation(); //immutable\n    const {search: locationSearch, pathname: locationPathname, state: locationState} = location;\n\n    const { rowsPerPage, rowsPerPageOptions, extraFilter, columns } = options;\n\n    const schema = useMemo(() => {\n        return yup.object().shape({\n            search: yup.string()\n                .transform(value => !value ? undefined : value)\n                .default(''),\n            pagination: yup.object().shape({\n                page: yup.number()\n                    .transform(value => isNaN(value) || parseInt(value) < 1 ? undefined : value)\n                    .default(1),\n                per_page: yup.number()\n                    .transform(value => isNaN(value) || !rowsPerPageOptions.includes(parseInt(value)) ? undefined : value)\n                    .default(rowsPerPage),\n            }),\n            order: yup.object().shape({\n                sort: yup.string()\n                    .nullable()\n                    .transform(value => {\n                        const columnsName = columns\n                            .filter(column => !column.options || column.options.sort !== false)\n                            .map(column => column.name);\n                        return columnsName.includes(value) ? value : undefined;\n                    })\n                    .default(null),\n                dir: yup.string()\n                    .nullable()\n                    .transform(value => !value || !['asc', 'desc'].includes(value.toLowerCase()) ? undefined : value)\n                    .default(null)\n            }),\n            ...(\n                extraFilter && {\n                    extraFilter: extraFilter.createValidationSchema()\n                }\n            )\n        })\n    }, [rowsPerPageOptions, rowsPerPage, columns, extraFilter]);\n\n    const stateFromURL = useMemo<FilterState>(() => {\n        const queryParams = new URLSearchParams(locationSearch.substr(1));\n        return schema.cast({\n            search: queryParams.get('search'),\n            pagination: {\n                page: queryParams.get('page'),\n                per_page: queryParams.get('per_page')\n            },\n            order: {\n                sort: queryParams.get('sort'),\n                dir: queryParams.get('dir')\n            },\n            ...(\n                extraFilter && {\n                    extraFilter: extraFilter.getStateFromURL(queryParams)\n                }\n            )\n        })\n    }, [schema, extraFilter, locationSearch]);\n\n    const cleanSearchText = useCallback((text) => {\n        let newText = text;\n        if (text && text.value !== undefined) {\n            newText = text.value\n        }\n        return newText;\n    }, []);\n\n    const formatSearchParams = useCallback((state, extraFilter) => {\n        const search = cleanSearchText(state.search);\n        return {\n            ...(search && search !== '' && { search: search }),\n            ...(state.pagination.page !== 1 && { page: state.pagination.page }),\n            ...(state.pagination.per_page !== 15 && { per_page: state.pagination.per_page }),\n            ...(\n                state.order.sort && {\n                    sort: state.order.sort,\n                    dir: state.order.dir\n                }\n            ),\n            ...(\n                extraFilter && extraFilter.formatSearchParams(state)\n            )\n        }\n    },[cleanSearchText]);\n\n    const INITIAL_STATE = stateFromURL;\n    const [filterState, dispatch] = useReducer<Reducer<FilterState, FilterActions>>(reducer, INITIAL_STATE);\n    const filterManager = new FilterManager({ ...options, state: filterState, dispatch, schema });\n    const [totalRecords, setTotalRecords] = useState<number>(0);\n    const [debouncedFilterState] = useDebounce(filterState, options.debounceTime);\n\n    useEffect(() => {\n        history.replace({\n            pathname: locationPathname,\n            search: \"?\" + new URLSearchParams(formatSearchParams(stateFromURL, extraFilter)),\n            state: stateFromURL,\n        })\n    }, [history, locationPathname, stateFromURL, extraFilter, formatSearchParams]);\n\n    useEffect(() => {\n        const newLocation = {\n            pathname: locationPathname,\n            search: \"?\" + new URLSearchParams(formatSearchParams(debouncedFilterState, extraFilter)),\n            state: {\n                ...debouncedFilterState,\n                search: cleanSearchText(debouncedFilterState.search)\n            }\n        }\n        const oldState = locationState;\n        const nextState = debouncedFilterState;\n\n        if (isEqual(oldState, nextState)) {\n            return;\n        }\n        history.push(newLocation);\n    }, [history, debouncedFilterState, extraFilter, cleanSearchText, formatSearchParams, locationPathname, locationState])\n\n    filterManager.state = filterState;\n    filterManager.applyOrderInColumns();\n\n    return {\n        columns: filterManager.columns,\n        cleanSearchText,\n        filterManager,\n        filterState,\n        debouncedFilterState,\n        dispatch,\n        totalRecords,\n        setTotalRecords\n    }\n}\n\nexport class FilterManager {\n\n    schema;\n    state: FilterState;\n    dispatch: Dispatch<FilterActions>;\n    columns: MUIDataTableColumn[];\n    rowsPerPage: number;\n    tableRef: React.MutableRefObject<MuiDataTableRefComponent>;\n\n    constructor(options: FilterManagerOptions) {\n        const { schema, columns, rowsPerPage, tableRef, dispatch, state } = options;\n        this.schema = schema;\n        this.columns = columns;\n        this.rowsPerPage = rowsPerPage;\n        this.tableRef = tableRef;\n        this.dispatch = dispatch;\n        this.state = state;\n    };\n\n    private resetTablePagination() {\n        this.tableRef.current.changeRowsPerPage(this.rowsPerPage);\n        this.tableRef.current.changePage(0);\n    }\n\n    changeSearch(value: any) {\n        this.dispatch(Creators.setSearch({ search: value }));\n    };\n\n    changePage(page: number) {\n        this.dispatch(Creators.setPage({ page: page + 1 }));\n    };\n\n    changeRowsPerPage(perPage: number) {\n        this.dispatch(Creators.setPerPage({ per_page: perPage }));\n    };\n\n    changeColumnSort(changedColumn: string, direction: string) {\n        this.dispatch(Creators.setOrder({\n            sort: changedColumn,\n            dir: direction.includes('desc') ? 'desc' : 'asc'\n        }));\n        this.resetTablePagination();\n    };\n\n    // changeExtraFilter(data) {\n    //     this.dispatch(Creators.updateExtraFilter(data));\n    // }\n\n    resetFilter() {\n        const INITIAL_STATE = {\n            ...this.schema.cast({}),\n            search: { value: null, update: true }\n        };\n        this.dispatch(Creators.setReset({\n            state: INITIAL_STATE\n        }))\n        this.resetTablePagination();\n    }\n\n    applyOrderInColumns() {\n        this.columns = this.columns.map((column) => {\n            return column.name === this.state.order.sort\n                ? {\n                    ...column,\n                    options: {\n                        ...column.options,\n                        sortOrder: {\n                            name: this.state.order.sort,\n                            direction: this.state.order.dir as any\n                        }\n                    }\n                }\n                : column;\n        });\n    }\n\n    changeExtraFilter(data) {\n        this.dispatch(Creators.updateExtraFilter(data));\n    }\n\n}","/* eslint-disable no-template-curly-in-string */\nimport { addMethod, NumberSchema, number } from \"yup\";\nimport { setLocale } from \"yup\";\n\nconst ptBR = {\n    mixed: {\n        required: '${path} e requerido',\n        notType: '${path} e invalido'\n    },\n    string: {\n        max: '${path} precisa ter no máximo ${max}'\n    },\n    number: {\n        min: '${path} precisa ser no mínimo ${min}'\n    }\n}\n\nsetLocale(ptBR);\n\naddMethod<NumberSchema>(number, 'xpto', function() {\n    return this.test({\n        message: 'message de error',\n        test: (value) => {\n            return true\n        }\n    })\n})\n\nexport * from 'yup';","import { createContext } from \"react\";\n\nconst LoadingContext = createContext(false);\n\nexport default LoadingContext;","/* eslint-disable react-hooks/exhaustive-deps */\n// @flow \nimport React, { useContext, useEffect, useRef, useState } from 'react';\n\nimport format from 'date-fns/format';\nimport parseISO from 'date-fns/parseISO';\nimport categoryHttp from '../../util/http/category-http';\nimport { BadgeNo, BadgeYes } from '../../components/Badge';\nimport { Category, ListResponse } from '../../util/models';\nimport DefaultTable, { makeActionStyle, TableColumn, MuiDataTableRefComponent } from '../../components/Table';\nimport { useSnackbar } from 'notistack';\nimport { IconButton, MuiThemeProvider } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { FilterResetButton } from '../../components/Table/FilterResetButton';\nimport useFilter from '../../hooks/useFilter';\nimport LoadingContext from '../../components/loading/LoadingContext';\n\nconst columnsDefinition: TableColumn[] = [\n    {\n        name: \"id\",\n        label: \"ID\",\n        width: \"33%\",\n        options: {\n            sort: false,\n            filter: false\n        }\n    },\n    {\n        name: \"name\",\n        label: \"Nome\",\n        width: \"40%\",\n        options: {\n            filter: false\n        }\n    },\n    {\n        name: \"is_active\",\n        label: \"Ativo?\",\n        width: \"4%\",\n        options: {\n            filterOptions: {\n                names: ['Sim', 'Nao']\n            },\n            customBodyRender(value, tableMeta, updateValue) {\n                return value ? <BadgeYes /> : <BadgeNo />\n            }\n        }\n    },\n    {\n        name: \"created_at\",\n        label: \"Criado em\",\n        width: \"10%\",\n        options: {\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return <span>{format(parseISO(value), 'dd/MM/yyyy')}</span>\n            }\n        }\n    },\n    {\n        name: \"actions\",\n        label: \"Ações\",\n        width: \"13%\",\n        options: {\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return (\n                    <span>\n                        <IconButton\n                            color={'secondary'}\n                            component={Link}\n                            to={`/categories/${tableMeta.rowData[0]}/edit`}\n                        >\n                            <EditIcon />\n                        </IconButton>\n                    </span>\n                )\n            }\n        }\n    }\n]\n\nconst debouncedTime = 300;\nconst debouncedSearchTime = 300;\nconst rowsPerPage = 15;\nconst rowsPerPageOptions = [15, 25, 50];\n\nconst Table = () => {\n\n    const snackbar = useSnackbar();\n    const subscribed = useRef(true);\n    const [data, setData] = useState<Category[]>([]);\n    const loading = useContext(LoadingContext);\n    const tableRef = useRef() as React.MutableRefObject<MuiDataTableRefComponent>;\n\n    const {\n        columns,\n        filterManager,\n        cleanSearchText,\n        filterState,\n        debouncedFilterState,\n        totalRecords,\n        setTotalRecords,\n    } = useFilter({\n        columns: columnsDefinition,\n        debounceTime: debouncedTime,\n        rowsPerPage,\n        rowsPerPageOptions,\n        tableRef\n    });\n\n    useEffect(() => {\n        subscribed.current = true;\n        getData();\n        return () => {\n            subscribed.current = false;\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        cleanSearchText(debouncedFilterState.search),\n        debouncedFilterState.pagination.page,\n        debouncedFilterState.pagination.per_page,\n        debouncedFilterState.order,\n    ]);\n\n    async function getData() {\n        try {\n            const { data } = await categoryHttp.list<ListResponse<Category>>({\n                queryParams: {\n                    search: cleanSearchText(filterState.search),\n                    page: filterState.pagination.page,\n                    per_page: filterState.pagination.per_page,\n                    sort: filterState.order.sort,\n                    dir: filterState.order.dir,\n                }\n            });\n            if (subscribed.current) {\n                setData(data.data);\n                setTotalRecords(data.meta.total);\n            }\n        } catch (error) {\n            console.error(error);\n            if (categoryHttp.isCancelledRequest(error)) {\n                return;\n            }\n            snackbar.enqueueSnackbar(\n                'Nao foi possivel carregar as informacoes',\n                { variant: 'error' }\n            )\n        }\n    }\n\n    return (\n        <MuiThemeProvider theme={makeActionStyle(columnsDefinition.length - 1)}>\n            <DefaultTable\n                title=\"Listagem de categorias\"\n                columns={columns}\n                data={data}\n                loading={loading}\n                debouncedSearchTime={debouncedSearchTime}\n                ref={tableRef}\n                options={\n                    {\n                        serverSide: true,\n                        responsive: \"scrollMaxHeight\",\n                        searchText: filterState.search as any,\n                        page: filterState.pagination.page - 1,\n                        rowsPerPage: filterState.pagination.per_page,\n                        rowsPerPageOptions,\n                        count: totalRecords,\n                        customToolbar: () => (\n                            <FilterResetButton\n                                handleClick={() => filterManager.resetFilter()}\n                            />\n                        ),\n                        onSearchChange: (value: any) => filterManager.changeSearch(value),\n                        onChangePage: (page: number) => filterManager.changePage(page),\n                        onChangeRowsPerPage: (perPage: number) => filterManager.changeRowsPerPage(perPage),\n                        onColumnSortChange: (changedColumn: string, direction: string) => filterManager.changeColumnSort(changedColumn, direction),\n                    }\n                }\n            />\n        </MuiThemeProvider>\n    );\n};\n\nexport default Table;","// @flow \nimport * as React from 'react';\nimport { Box, Fab } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\nimport { Page } from '../../components/Page';\nimport { Add } from '@material-ui/icons';\nimport Table from './Table';\n\nconst PagList = () => {\n    return (\n       <Page title=\"Listagem categorias\">\n           <Box dir={'rtl'} paddingBottom={2}>\n            <Fab\n                title=\"Adicionar categoria\"\n                color={'secondary'}\n                size=\"small\"\n                component={Link}\n                to=\"/categories/create\"\n            >\n                <Add/>\n            </Fab>\n           </Box>\n           <Box>\n               <Table/>\n           </Box>\n       </Page>\n    );\n};\n\nexport default PagList;","// @flow \nimport { Box, Button, ButtonProps, makeStyles, Theme } from '@material-ui/core';\nimport * as React from 'react';\n\nconst useStyles = makeStyles((theme: Theme) => {\n    return {\n        submit: {\n            margin: theme.spacing(1)\n        }\n    }\n})\n\ninterface SubmitActionsProps {\n    disabledButtons?: boolean;\n    handleSave: () => void;\n}\nconst SubmitActions: React.FC<SubmitActionsProps> = (props) => {\n    \n    const classes = useStyles();\n    const buttonProps: ButtonProps = {\n        variant: 'contained',\n        color: 'secondary',\n        size: 'medium',\n        className: classes.submit,\n        disabled: props.disabledButtons === undefined ? false: props.disabledButtons\n    }\n    \n    return (\n        <Box dir={'ltf'}>\n            <Button {...buttonProps} onClick={props.handleSave}>Salvar</Button>\n            <Button {...buttonProps} type=\"submit\">Salvar e continuar editando</Button>\n        </Box>\n    );\n};\n\nexport default SubmitActions;","// @flow \nimport { Grid, GridProps, makeStyles } from '@material-ui/core';\nimport * as React from 'react';\n\nconst useStyles = makeStyles(theme => ({\n    gridItem: {\n        padding: theme.spacing(1,0)\n    }\n}))\n\ninterface DefaultFormProps extends React.DetailedHTMLProps<React.FormHTMLAttributes<HTMLFormElement>, HTMLFormElement> {\n    GridContainerProps?: GridProps;\n    GridItemProps?: GridProps;\n};\nconst DefaultForm: React.FC<DefaultFormProps> = (props) => {\n\n    const classes = useStyles();\n    const {GridContainerProps,  GridItemProps, ...others} = props;\n\n    return (\n        <form {...others}>\n            <Grid container {...GridContainerProps}>\n                <Grid className={classes.gridItem} item {...GridItemProps}>\n                    {props.children}\n                </Grid>\n            </Grid>\n        </form>\n    );\n};\n\nexport default DefaultForm;","// @flow \nimport { Checkbox, FormControlLabel, TextField } from '@material-ui/core';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport categoryHttp from '../../util/http/category-http';\nimport * as yup from '../../util/vendor/yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { useHistory, useParams } from 'react-router';\nimport { IUserRouteParams } from '../../util/models/interfaces';\nimport { useSnackbar } from 'notistack';\nimport { Category } from '../../util/models';\nimport SubmitActions from '../../components/SubmitActions';\nimport DefaultForm from '../../components/DafaultForm';\nimport LoadingContext from '../../components/loading/LoadingContext';\n\nconst validationSchema = yup.object().shape({\n    name: yup.string()\n        .label('Nome')\n        .required()\n        .max(255)\n})\n\nexport const Form = () => {\n\n    const {\n        register,\n        handleSubmit,\n        getValues,\n        setValue,\n        errors,\n        reset,\n        watch,\n        trigger\n    } = useForm<{name, is_active}>({\n        resolver: yupResolver(validationSchema),\n        defaultValues: {\n            is_active: true\n        }\n    });\n\n    const snackbar = useSnackbar();\n    const history = useHistory();\n    const { id } = useParams<IUserRouteParams>();\n    const [category, setCategory] = useState<Category | null>(null);\n    const loading = useContext(LoadingContext);\n\n    useEffect(() => {\n        if (!id) {\n            return;\n        }\n        (async function getCategory() {\n            try {\n                const { data } = await categoryHttp.get(id);\n                setCategory(data.data);\n                reset(data.data);\n            } catch (error) {\n                console.log(error);\n                snackbar.enqueueSnackbar(\n                    'Nao foi possivel carregar as informacoes!', {\n                    variant: 'error'\n                });\n            }\n        })()\n\n        // eslint-disable-next-line\n    }, []);\n\n    useEffect(() => {\n        register({ name: 'is_active' })\n    }, [register]);\n\n    async function onSubmit(formData, event) {\n        try {\n            const http = !category\n                ? categoryHttp.create(formData)\n                : categoryHttp.update(category.id, formData);\n            const { data } = await http;\n            snackbar.enqueueSnackbar(\n                'Categoria salva com sucesso!', {\n                variant: 'success'\n            });\n            setTimeout(() => {\n                event\n                    ? (\n                        id\n                            ? history.replace(`/categories/${data.data.id}/edit`)\n                            : history.push(`/categories/${data.data.id}/edit`)\n                    ) : history.push(`/categories`)\n            });\n        } catch (error) {\n            console.log(error);\n            snackbar.enqueueSnackbar(\n                'Nao foi possivel salvar a categoria!', {\n                variant: 'error'\n            });\n        }\n    }\n\n    return (\n        <DefaultForm\n            GridItemProps={{ xs: 12, md: 6 }}\n            onSubmit={handleSubmit(onSubmit)}>\n            <TextField\n                name=\"name\"\n                label=\"Nome\"\n                fullWidth\n                variant={'outlined'}\n                inputRef={register}\n                disabled={loading}\n                error={(errors as any).name !== undefined}\n                helperText={(errors as any).name && (errors as any).name.message}\n                InputLabelProps={{ shrink: true }}\n            />\n            <TextField\n                name=\"description\"\n                label=\"Descrição\"\n                multiline\n                rows=\"4\"\n                fullWidth\n                variant={'outlined'}\n                margin={'normal'}\n                disabled={loading}\n                inputRef={register}\n                InputLabelProps={{ shrink: true }}\n            />\n            <FormControlLabel\n                control={\n                    <Checkbox\n                        name=\"is_active\"\n                        color={'primary'}\n                        onChange={\n                            () => setValue('is_active', !getValues()['is_active'])\n                        }\n                        checked={watch('is_active')}\n                        disabled={loading}\n                    />\n                }\n                label={'Ativo'}\n                labelPlacement={'end'}\n            />\n            <SubmitActions\n                disabledButtons={loading}\n                handleSave={() =>\n                    trigger().then(isValid => {\n                        isValid && onSubmit(getValues(), null)\n                    })\n                }\n            />\n        </DefaultForm>\n    );\n};","// @flow \nimport * as React from 'react';\nimport { useParams } from 'react-router';\nimport { Page } from '../../components/Page';\nimport { IUserRouteParams } from '../../util/models/interfaces';\nimport { Form } from './Form';\n\nconst PageForm = () => {\n    const { id } = useParams<IUserRouteParams>();\n    return (\n        <Page title={!id ? \"Criar categoria\" : \"Editar categoria\"}>\n            <Form/>\n        </Page>\n    );\n};\n\nexport default PageForm;","import { httpVideo } from \".\";\nimport HttpResource from \"./http-resource\";\n\nconst genreHttp = new HttpResource(httpVideo, \"genres\");\n\nexport default genreHttp;","/* eslint-disable react-hooks/exhaustive-deps */\n// @flow \nimport React, { useEffect, useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { MuiThemeProvider, IconButton } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport format from 'date-fns/format';\nimport parseISO from 'date-fns/parseISO';\nimport { useSnackbar } from 'notistack';\n\nimport genreHttp from '../../util/http/genre-http';\nimport { Genre, ListResponse } from '../../util/models';\nimport DefaultTable, { makeActionStyle, MuiDataTableRefComponent, TableColumn } from '../../components/Table';\nimport useFilter from '../../hooks/useFilter';\nimport { FilterResetButton } from '../../components/Table/FilterResetButton';\nimport * as yup from '../../util/vendor/yup';\nimport categoryHttp from '../../util/http/category-http';\nimport { BadgeNo, BadgeYes } from '../../components/Badge';\n\nconst columnsDefinition: TableColumn[] = [\n    {\n        name: 'id',\n        label: 'ID',\n        width: '30%',\n        options: {\n            sort: false,\n            filter: false\n        }\n    },\n    {\n        name: \"name\",\n        label: \"Nome\",\n        width: \"23%\",\n        options: {\n            filter: false\n        }\n    },\n    {\n        name: \"is_active\",\n        label: \"Ativo?\",\n        options: {\n            customBodyRender(value, tableMeta, updateValue) {\n                return value ? <BadgeYes /> : <BadgeNo />;\n            }\n        },\n        width: '4%',\n    },\n    {\n        name: \"categories\",\n        label: \"Categorias\",\n        width: '20%',\n        options: {\n            filterType: 'multiselect',\n            filterOptions: {\n                names: []\n            },\n            customBodyRender: (value, tableMeta, updateValue) => {\n                return 'teste';//.map(value => value.name).join(', ');\n            }\n        }\n    },\n    {\n        name: \"created_at\",\n        label: \"Criado em\",\n        width: '10%',\n        options: {\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return <span>{format(parseISO(value), 'dd/MM/yyyy')}</span>\n            }\n        }\n    },\n    {\n        name: \"actions\",\n        label: \"Ações\",\n        width: '13%',\n        options: {\n            filter: false,\n            sort: false,\n            customBodyRender: (value, tableMeta) => {\n                return (\n                    <span>\n                        <IconButton\n                            color={'secondary'}\n                            component={Link}\n                            to={`/genres/${tableMeta.rowData[0]}/edit`}\n                        >\n                            <EditIcon />\n                        </IconButton>\n                    </span>\n                )\n            }\n        }\n    }\n];\n\nconst debouncedTime = 300;\nconst debouncedSearchTime = 300;\nconst rowsPerPage = 15;\nconst rowsPerPageOptions = [15, 25, 50];\n\nconst extraFilter = {\n    createValidationSchema: () => {\n        return yup.object().shape({\n            categories: yup.mixed()\n                .nullable()\n                .transform(value => {\n                    return !value || value === '' ? undefined : value.split(',');\n                })\n                .default(null),\n        })\n    },\n    formatSearchParams: (debouncedState) => {\n        return debouncedState.extraFilter ? {\n            ...(\n                debouncedState.extraFilter.categories &&\n                {categories: debouncedState.extraFilter.categories.join(',')}\n            )\n        } : undefined\n    },\n    getStateFromURL: (queryParams) => {\n        return {\n            categories: queryParams.get('categories')\n        }\n    }\n}\n\nconst Table = () => {\n\n    const snackbar = useSnackbar();\n    const subscribed = useRef(true);\n    const [data, setData] = useState<Genre[]>([]);\n    const [loading, setLoading] = useState<boolean>(false);\n    const tableRef = useRef() as React.MutableRefObject<MuiDataTableRefComponent>;\n\n    const {\n        columns,\n        filterManager,\n        cleanSearchText,\n        filterState,\n        debouncedFilterState,\n        totalRecords,\n        setTotalRecords,\n    } = useFilter({\n        columns: columnsDefinition,\n        debounceTime: debouncedTime,\n        rowsPerPage,\n        rowsPerPageOptions,\n        tableRef,\n        extraFilter\n    });\n\n    const indexColumnCategories = columns.findIndex(c => c.name === 'categories');\n    const columnCategories = columns[indexColumnCategories];\n    const categoriesFilterValue = filterState.extraFilter && filterState.extraFilter.categories;\n    (columnCategories.options as any).filterList = categoriesFilterValue ? categoriesFilterValue : [];\n\n    const serverSideFilterList = columns.map(column => []);\n    if (categoriesFilterValue) {\n        serverSideFilterList[indexColumnCategories] = categoriesFilterValue;\n    }\n\n    useEffect(() => {\n        let isSubscribed = true;\n        (async () => {\n            try {\n                const { data } = await categoryHttp.list({ queryParams: { all: '' } });\n                if (isSubscribed) {\n                    setData(data.data);\n                    (columnCategories.options as any).filterOptions.names = data.data.map(category => category.name);\n                }\n            } catch (error) {\n                console.error(error);\n                snackbar.enqueueSnackbar(\n                    'Nao foi possível carregar as informações',\n                    { variant: 'error' }\n                )\n            }\n        })();\n\n        return () => {\n            isSubscribed = false;\n        }\n    },[]);\n\n    useEffect(() => {\n        subscribed.current = true;\n        getData();\n        return () => {\n            subscribed.current = false;\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        cleanSearchText(debouncedFilterState.search),\n        debouncedFilterState.pagination.page,\n        debouncedFilterState.pagination.per_page,\n        debouncedFilterState.order,\n        JSON.stringify(debouncedFilterState.extraFilter)\n    ]);\n\n    async function getData() {\n        setLoading(true);\n        try {\n            const { data } = await genreHttp.list<ListResponse<Genre>>({\n                queryParams: {\n                    search: cleanSearchText(filterState.search),\n                    page: filterState.pagination.page,\n                    per_page: filterState.pagination.per_page,\n                    sort: filterState.order.sort,\n                    dir: filterState.order.dir,\n                    ...(\n                        debouncedFilterState.extraFilter &&\n                        debouncedFilterState.extraFilter.categories &&\n                        { categories: debouncedFilterState.extraFilter.categories.join(',') }\n                    )\n                }\n            });\n            if (subscribed.current) {\n                setData(data.data);\n                setTotalRecords(data.meta.total);\n            }\n        } catch (error) {\n            console.error(error);\n            if (genreHttp.isCancelledRequest(error)) {\n                return;\n            }\n            snackbar.enqueueSnackbar(\n                'Nao foi possível carregar as informações',\n                { variant: 'error' }\n            )\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    return (\n        <MuiThemeProvider theme={makeActionStyle(columnsDefinition.length - 1)}>\n            <DefaultTable\n                title=\"Listagem de géneros\"\n                columns={columnsDefinition}\n                data={data}\n                loading={loading}\n                debouncedSearchTime={debouncedSearchTime}\n                ref={tableRef}\n                options={\n                    {\n                        serverSideFilterList,\n                        serverSide: true,\n                        responsive: \"scrollMaxHeight\",\n                        searchText: filterState.search as any,\n                        page: filterState.pagination.page - 1,\n                        rowsPerPage: filterState.pagination.per_page,\n                        rowsPerPageOptions,\n                        count: totalRecords,\n                        onFilterChange: (column, FilterList) => {\n                            const columnIndex = columns.findIndex(c => c.name === column);\n                            filterManager.changeExtraFilter({\n                                [column]: FilterList[columnIndex].length ? FilterList[columnIndex] : null\n                            })\n                        },\n                        customToolbar: () => (\n                            <FilterResetButton\n                                handleClick={() => filterManager.resetFilter()}\n                            />\n                        ),\n                        onSearchChange: (value: any) => filterManager.changeSearch(value),\n                        onChangePage: (page: number) => filterManager.changePage(page),\n                        onChangeRowsPerPage: (perPage: number) => filterManager.changeRowsPerPage(perPage),\n                        onColumnSortChange: (changedColumn: string, direction: string) => filterManager.changeColumnSort(changedColumn, direction),\n                    }\n                }\n            />\n        </MuiThemeProvider>\n    );\n};\n\nexport default Table;","// @flow \nimport * as React from 'react';\nimport { Box, Fab } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\nimport { Page } from '../../components/Page';\nimport { Add } from '@material-ui/icons';\nimport Table from './Table';\n\nconst PagList = () => {\n    return (\n       <Page title=\"Listagem gêneros\">\n           <Box dir={'rtl'} paddingBottom={2}>\n            <Fab\n                title=\"Adicionar gênero\"\n                color={'secondary'}\n                size=\"small\"\n                component={Link}\n                to=\"/genres/create\"\n            >\n                <Add/>\n            </Fab>\n           </Box>\n           <Box>\n               <Table/>\n           </Box>\n       </Page>\n    );\n};\n\nexport default PagList;","// @flow \nimport { MenuItem, TextField } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport categoryHttp from '../../util/http/category-http';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from '../../util/vendor/yup';\nimport { useSnackbar } from 'notistack';\nimport { useHistory, useParams } from 'react-router';\nimport { IUserRouteParams } from '../../util/models/interfaces';\nimport genreHttp from '../../util/http/genre-http';\nimport { Category, Genre } from '../../util/models';\nimport SubmitActions from '../../components/SubmitActions';\nimport DefaultForm from '../../components/DafaultForm';\n\nconst validationSchema = yup.object().shape({\n    name: yup.string()\n        .label('Nome')\n        .required()\n        .max(255),\n    categories_id: yup.array()\n        .label('Categorias')\n        .required(),\n})\n\nexport const Form = () => {\n\n    const {\n        register,\n        handleSubmit,\n        getValues,\n        setValue,\n        errors,\n        reset,\n        watch,\n        trigger\n    } = useForm<{name, categories_id}>({\n        resolver: yupResolver(validationSchema),\n        defaultValues: {\n            categories_id: [],\n            name: ''\n        }\n    });\n\n    const {enqueueSnackbar} = useSnackbar();\n    const history = useHistory();\n    const { id } = useParams<IUserRouteParams>();\n    const [genre, setGenre] = useState<Genre | null>(null);\n    const [categories, setCategories] = useState<Category[]>([]);\n    const [loading, setLoading] = useState<boolean>(false);\n\n    useEffect(() => {\n        let isSubscribed = true;\n\n        (async function loadData() {\n            setLoading(true);\n            const promises = [categoryHttp.list({ queryParams: { all: '' } })];\n            if (id) {\n                promises.push(genreHttp.get(id));\n            }\n            try {\n                const [categoriesResponse, genreResponse] = await Promise.all(promises);\n                if (isSubscribed) {\n                    setCategories(categoriesResponse.data.data);\n                    if (id) {\n                        setGenre(genreResponse.data.data);\n                        reset({\n                            ...genreResponse.data.data,\n                            categories_id: genreResponse.data.data.categories.map(category => category.id)\n                        });\n                    }\n                }\n            } catch (error) {\n                console.error(error);\n                enqueueSnackbar(\n                    'Nao foi possível carregar as informações',\n                    { variant: 'error' }\n                )\n            } finally {\n                setLoading(false);\n            }\n        })();\n    }, [id, reset, enqueueSnackbar]);\n\n    async function onSubmit(formData, event) {\n\n        setLoading(true);\n        try {\n            const http = !genre\n                ? genreHttp.create(formData)\n                : genreHttp.update(genre.id, formData);\n            const { data } = await http;\n            enqueueSnackbar(\n                'Genero salvo com sucesso',\n                { variant: 'success' }\n            );\n            setTimeout(() => {\n                event\n                    ? (\n                        id\n                            ? history.replace(`/genres/${data.data.id}/edit`)\n                            : history.push(`/genres/${data.data.id}/edit`)\n                    )\n                    : history.push('/genres')\n            })\n        } catch (error) {\n            console.error(error);\n            enqueueSnackbar(\n                'Nao foi possivel salvar o genero',\n                { variant: 'error' }\n            )\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    useEffect(() => {\n        register({ name: 'categories_id' })\n    }, [register]);\n\n    return (\n        <DefaultForm\n            GridItemProps={{ xs: 12, md: 6 }}\n            onSubmit={handleSubmit(onSubmit)}>\n            <TextField\n                name=\"name\"\n                label=\"Nome\"\n                fullWidth\n                variant={'outlined'}\n                inputRef={register}\n                disabled={loading}\n                error={(errors as any).name !== undefined}\n                helperText={(errors as any).name && (errors as any).name.message}\n                InputLabelProps={{ shrink: true }}\n            />\n\n            <TextField\n                select\n                name=\"categories_id\"\n                value={watch('categories_id')}\n                label=\"Categories\"\n                margin={'normal'}\n                variant={'outlined'}\n                fullWidth\n                onChange={(e) => {\n                    setValue('categories_id', e.target.value);\n                }}\n                SelectProps={{\n                    multiple: true\n                }}\n                disabled={loading}\n                error={errors.categories_id !== undefined}\n                helperText={errors.categories_id && errors.categories_id}\n                InputLabelProps={{ shrink: true }}\n            >\n                <MenuItem value=\"\" disabled>\n                    <em>Selecione categorias</em>\n                </MenuItem>\n                {\n                    categories.map(\n                        (category, key) => (\n                            <MenuItem key={key} value={category.id}>{category.name}</MenuItem>\n                        )\n                    )\n                }\n            </TextField>\n            <SubmitActions\n                disabledButtons={loading}\n                handleSave={() => trigger().then(isValid => {\n                    isValid && onSubmit(getValues(), null)\n                })} />\n        </DefaultForm>\n\n\n    );\n};","// @flow \nimport * as React from 'react';\nimport { Page } from '../../components/Page';\nimport { Form } from './Form';\ntype Props = {\n    \n};\nconst PageForm = (props: Props) => {\n    return (\n        <Page title=\"Criar genero\">\n            <Form/>\n        </Page>\n    );\n};\n\nexport default PageForm;","import { httpVideo } from \".\";\nimport HttpResource from \"./http-resource\";\n\nconst castMemberHttp = new HttpResource(httpVideo, \"cast_members\");\n\nexport default castMemberHttp;","/* eslint-disable react-hooks/exhaustive-deps */\n// @flow \nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { IconButton, MuiThemeProvider } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport format from 'date-fns/format';\nimport parseISO from 'date-fns/parseISO';\nimport { useSnackbar } from 'notistack';\n\nimport castMemberHttp from '../../util/http/cast-member-http';\nimport { CastMember, ListResponse } from '../../util/models';\nimport DefaultTable, { makeActionStyle, MuiDataTableRefComponent, TableColumn } from '../../components/Table';\nimport useFilter from '../../hooks/useFilter';\nimport { FilterResetButton } from '../../components/Table/FilterResetButton';\nimport * as yup from '../../util/vendor/yup';\nimport { invert } from 'lodash';\n\nconst CastMemberTypeMap = {\n    0: 'Diretor',\n    1: 'Ator'\n}\n\nconst castMemberNames = Object.values(CastMemberTypeMap);\n\nconst columnsDefinition: TableColumn[] = [\n    {\n        name: \"id\",\n        label: \"ID\",\n        width: \"20%\",\n        options: {\n            sort: false,\n            filter: false,\n        }\n    },\n    {\n        name: \"name\",\n        label: \"Nome\",\n        width: \"25%\",\n        options: {\n            filter: false\n        }\n    },\n    {\n        name: \"type\",\n        label: \"Tipo\",\n        width: \"25%\",\n        options: {\n            filterOptions: {\n                names: castMemberNames\n            },\n            customBodyRender: (value, tableMeta, updateValue) => {\n                return CastMemberTypeMap[value];\n            }\n        }\n    },\n    {\n        name: \"created_at\",\n        label: \"Criado em\",\n        width: \"17%\",\n        options: {\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return <span>{format(parseISO(value), 'dd/MM/yyyy')}</span>\n            }\n        }\n    },\n    {\n        name: \"actions\",\n        label: \"Ações\",\n        width: \"13%\",\n        options: {\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return (\n                    <span>\n                        <IconButton\n                            color={'secondary'}\n                            component={Link}\n                            to={`/cast-members/${tableMeta.rowData[0]}/edit`}\n                        >\n                            <EditIcon />\n                        </IconButton>\n                    </span>\n                )\n            }\n        }\n    }\n]\n\nconst debouncedTime = 300;\nconst debouncedSearchTime = 300;\nconst rowsPerPage = 15;\nconst rowsPerPageOptions = [15, 25, 50];\n\nconst Table = () => {\n\n    const {enqueueSnackbar} = useSnackbar();\n    const subscribed = useRef(true);\n    const [data, setData] = useState<CastMember[]>([]);\n    const [loading, setLoading] = useState<boolean>(false);\n    const tableRef = useRef() as React.MutableRefObject<MuiDataTableRefComponent>;\n\n    const extraFilter = useMemo(() => ({\n        createValidationSchema: () => {\n            return yup.object().shape({\n                type: yup.string()\n                    .nullable()\n                    .transform(value => {\n                        return !value || !castMemberNames.includes(value) ? undefined : value\n                    })\n                    .default(null)\n\n            })\n        },\n        formatSearchParams: (debouncedState) => {\n            return debouncedState.extraFilter ? {\n                ...(\n                    debouncedState.extraFilter.type &&\n                    { type: debouncedState.extraFilter.type }\n                )\n            } : undefined\n        },\n        getStateFromURL: (queryParams: URLSearchParams) => {\n            return {\n                type: queryParams.get('type')\n            }\n        }\n    }\n    ), []);\n\n    const {\n        columns,\n        filterManager,\n        cleanSearchText,\n        filterState,\n        debouncedFilterState,\n        totalRecords,\n        setTotalRecords,\n    } = useFilter({\n        columns: columnsDefinition,\n        debounceTime: debouncedTime,\n        rowsPerPage,\n        rowsPerPageOptions,\n        tableRef,\n        extraFilter\n    });\n\n    const searchText = cleanSearchText(filterState.search);\n\n    //?type=Diretor\n    const indexColumnType = columns.findIndex(c => c.name === 'type');\n    const columnType = columns[indexColumnType];\n    const typeFilterValue = filterState.extraFilter && filterState.extraFilter.type as never;\n    (columnType.options as any).filterList = typeFilterValue ? [typeFilterValue] : [];\n\n    const serverSideFilterList = columns.map(column => []);\n    if (typeFilterValue) {\n        serverSideFilterList[indexColumnType] = [typeFilterValue];\n    }\n\n    const getData = useCallback(async ({ search, page, per_page, sort, dir, type }) => {\n        setLoading(true);\n        try {\n            const { data } = await castMemberHttp.list<ListResponse<CastMember>>({\n                queryParams: {\n                    search,\n                    page,\n                    per_page,\n                    sort,\n                    dir,\n                    ...(\n                        type &&\n                        { type: invert(CastMemberTypeMap)[type] }\n                    )\n                }\n            });\n            if (subscribed.current) {\n                setData(data.data);\n                setTotalRecords(data.meta.total);\n            }\n        } catch (error) {\n            console.error(error);\n            if (castMemberHttp.isCancelledRequest(error)) {\n                return;\n            }\n            enqueueSnackbar(\n                'Nao foi possível carregar as informações',\n                { variant: 'error' }\n            )\n        } finally {\n            setLoading(false);\n        }\n    }, [enqueueSnackbar, setTotalRecords]);\n\n    useEffect(() => {\n        subscribed.current = true;\n        getData({\n            search: searchText,\n            page: filterState.pagination.page,\n            per_page: filterState.pagination.per_page,\n            sort: filterState.order.sort,\n            dir: filterState.order.dir,\n            ...(\n                debouncedFilterState.extraFilter &&\n                debouncedFilterState.extraFilter.type &&\n                {\n                    type: debouncedFilterState.extraFilter.type\n                }\n            )\n        });\n\n        return () => {\n            subscribed.current = false;\n        }\n    }, [\n        getData,\n        searchText,\n        debouncedFilterState.pagination.page,\n        debouncedFilterState.pagination.per_page,\n        debouncedFilterState.order,\n        debouncedFilterState.extraFilter\n    ]);\n\n    return (\n        <MuiThemeProvider theme={makeActionStyle(columnsDefinition.length - 1)}>\n            <DefaultTable\n                title=\"Listagem de membros de elenco\"\n                columns={columnsDefinition}\n                data={data}\n                loading={loading}\n                debouncedSearchTime={debouncedSearchTime}\n                ref={tableRef}\n                options={\n                    {\n                        serverSideFilterList,\n                        serverSide: true,\n                        responsive: \"scrollMaxHeight\",\n                        searchText: filterState.search as any,\n                        page: filterState.pagination.page - 1,\n                        rowsPerPage: filterState.pagination.per_page,\n                        rowsPerPageOptions,\n                        count: totalRecords,\n                        onFilterChange: (column, filterList, type) => {\n                            const columnIndex = columns.findIndex(c => c.name === column);\n                            filterManager.changeExtraFilter({\n                                [column]: filterList[columnIndex].length ? filterList[columnIndex][0] : null\n                            })\n                        },\n                        customToolbar: () => (\n                            <FilterResetButton\n                                handleClick={() => filterManager.resetFilter()}\n                            />\n                        ),\n                        onSearchChange: (value: any) => filterManager.changeSearch(value),\n                        onChangePage: (page: number) => filterManager.changePage(page),\n                        onChangeRowsPerPage: (perPage: number) => filterManager.changeRowsPerPage(perPage),\n                        onColumnSortChange: (changedColumn: string, direction: string) => filterManager.changeColumnSort(changedColumn, direction),\n                    }\n                }\n            />\n        </MuiThemeProvider>\n    );\n};\n\nexport default Table;","// @flow \nimport * as React from 'react';\nimport { Box, Fab } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\nimport { Page } from '../../components/Page';\nimport { Add } from '@material-ui/icons';\nimport Table from './Table';\n\nconst PagList = () => {\n    return (\n       <Page title=\"Listagem de membros de elencos\">\n           <Box dir={'rtl'} paddingBottom={2}>\n            <Fab\n                title=\"Adicionar membro de elenco\"\n                color={'secondary'}\n                size=\"small\"\n                component={Link}\n                to=\"/cast-members/create\"\n            >\n                <Add/>\n            </Fab>\n           </Box>\n           <Box>\n               <Table/>\n           </Box>\n       </Page>\n    );\n};\n\nexport default PagList;","// @flow \nimport {\n    FormControl,\n    FormControlLabel,\n    FormHelperText,\n    FormLabel,\n    Radio,\n    RadioGroup,\n    TextField,\n} from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from '../../util/vendor/yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { useSnackbar } from 'notistack';\nimport { useHistory, useParams } from 'react-router';\nimport { IUserRouteParams } from '../../util/models/interfaces';\nimport castMemberHttp from '../../util/http/cast-member-http';\nimport { CastMember } from '../../util/models';\nimport SubmitActions from '../../components/SubmitActions';\nimport DefaultForm from '../../components/DafaultForm';\n\nconst validationSchema = yup.object().shape({\n    name: yup.string()\n        .label('Nome')\n        .required()\n        .max(255),\n    type: yup.number()\n        .label('Tipo')\n        .required(),\n})\nexport const Form = () => {\n\n    const {\n        register,\n        handleSubmit,\n        getValues,\n        setValue,\n        errors,\n        reset,\n        watch,\n        trigger\n    } = useForm<{name, type}>({\n        resolver: yupResolver(validationSchema),\n    });\n\n    const snackbar = useSnackbar();\n    const history = useHistory();\n    const { id } = useParams<IUserRouteParams>();\n    const [castMember, setCastMember] = useState<CastMember | null>(null);\n    const [loading, setLoading] = useState<boolean>(false);\n\n    useEffect(() => {\n        if (!id) {\n            return;\n        }\n        async function getCastMember() {\n            setLoading(true);\n            try {\n                const { data } = await castMemberHttp.get(id)\n                setCastMember(data.data);\n                reset(data.data);\n            } catch (error) {\n                console.error(error);\n                snackbar.enqueueSnackbar(\n                    'Não foi possível carregar as informações',\n                    { variant: 'error' }\n                )\n            } finally {\n                setLoading(false)\n            }\n        }\n        getCastMember();\n        // eslint-disable-next-line\n    }, []);\n\n    useEffect(() => {\n        register({ name: \"type\" })\n    }, [register]);\n\n    async function onSubmit(formData, event) {\n        setLoading(true);\n        try {\n            const http = !castMember\n                ? castMemberHttp.create(formData)\n                : castMemberHttp.update(castMember.id, formData);\n            const { data } = await http;\n            snackbar.enqueueSnackbar(\n                'Membro de elenco salvo com sucesso!',\n                { variant: 'success' }\n            );\n            setTimeout(() => {\n                event\n                    ? (\n                        id\n                            ? history.replace(`/cast-members/${data.data.id}/edit`)\n                            : history.push(`/cast-members/${data.data.id}/edit`)\n                    )\n                    : history.push('/cast-members')\n            });\n        } catch (error) {\n            console.error(error);\n            snackbar.enqueueSnackbar(\n                'Nao foi possivel salvar o membro de elenco',\n                { variant: 'error' }\n            )\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    return (\n        <DefaultForm\n            GridItemProps={{ xs: 12, md: 6 }}\n            onSubmit={handleSubmit(onSubmit)}>\n            <TextField\n                name=\"name\"\n                label=\"Nome\"\n                fullWidth\n                variant={'outlined'}\n                inputRef={register}\n                disabled={loading}\n                error={errors.name !== undefined}\n                helperText={errors.name && errors.name.message}\n                InputLabelProps={{ shrink: true }}\n            />\n            <FormControl\n                margin={\"normal\"}\n                error={errors.type !== undefined}\n                disabled={loading}\n            >\n                <FormLabel component={\"legend\"}>Tipo</FormLabel>\n                <RadioGroup\n                    name=\"type\"\n                    onChange={(e) => {\n                        setValue('type', parseInt(e.target.value));\n                    }}\n                    value={watch('type') + \"\"}\n                >\n                    <FormControlLabel value=\"1\" control={<Radio color={'primary'} />} label=\"Diretor\" />\n                    <FormControlLabel value=\"2\" control={<Radio color={'primary'} />} label=\"Ator\" />\n                </RadioGroup>\n                {\n                    errors.type &&\n                    <FormHelperText id=\"type-helper-text\">{errors.type.message}</FormHelperText>\n                }\n            </FormControl>\n            <SubmitActions\n                disabledButtons={loading}\n                handleSave={() => trigger().then(isValid => {\n                    isValid && onSubmit(getValues(), null)\n                })} />\n        </DefaultForm>\n    );\n};","// @flow \nimport * as React from 'react';\nimport { Page } from '../../components/Page';\nimport { Form } from './Form';\ntype Props = {\n    \n};\nconst PageForm = (props: Props) => {\n    return (\n        <Page title=\"Criar membros\">\n            <Form/>\n        </Page>\n    );\n};\n\nexport default PageForm;","import { httpVideo } from \".\";\nimport HttpResource from \"./http-resource\";\n\nconst videoHttp = new HttpResource(httpVideo, \"videos\");\n\nexport default videoHttp;","export interface ListResponse<T> {\n    data: T[];\n    links: {\n        first: string;\n        last: string;\n        prev: string | null;\n        next: string | null;\n    };\n    meta: {\n        current_page: number;\n        from: number;\n        last_page: number;\n        path: string;\n        per_page: number;\n        to: number;\n        total: number;\n    };\n}\n\ninterface Timestampable {\n    readonly created_at: string;\n    readonly deleted_at: string;\n    readonly updated_at: string;\n}\n\nexport interface Category extends Timestampable {\n    readonly id: string;\n    name: string;\n    description: string;\n    is_active: boolean\n}\n\nexport interface CastMember extends Timestampable {\n    readonly id: string;\n    name: string;\n    type: number;\n}\n\nexport interface Genre extends Timestampable {\n    readonly id: string;\n    name: string;\n    is_active: number;\n    categories: Category[];\n}\n\ninterface GenreVideo extends Omit<Genre, 'categories'> {\n}\n\nexport const VideoFileFieldsMap = {\n    'thumb_file': 'Thumbnail',\n    'banner_file': 'Banner',\n    'trailer_file': 'Trailer',\n    'video_file': 'Principal',\n}\n\nexport interface Video extends Timestampable {\n    readonly id: string;\n    title: string;\n    description: string;\n    year_launched: string;\n    opened: boolean;\n    rating: string;\n    duration: number;\n    genres: GenreVideo[];\n    categories: Category[];\n    cast_members: CastMember[];\n    thumb_file_url: string;\n    banner_file_url: string;\n    trailer_file_url: string;\n    video_file_url: string;\n}","// @flow \nimport * as React from 'react';\nimport { makeStyles, Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n    root: {\n        width: '36px',\n        height: '36px',\n        fontSize: '1.2em',\n        color: '#fff',\n        borderRadius: '4px',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n    }\n});\n\nconst backgroundColors = {\n    'L': '#398549',\n    '10': '#20A3D4',\n    '12': '#E79738',\n    '14': '#E35E00',\n    '16': '#D00003',\n    '18': '#000000'\n};\n\ninterface RatingProps {\n    rating: 'L' | '10' | '12' | '14' | '16' | '18';\n}\n\nconst Rating: React.FC<RatingProps> = (props) => {\n    const classes = useStyles();\n    return (\n        <Typography\n            className={classes.root}\n            style={{\n                backgroundColor: backgroundColors[props.rating]\n            }}\n        >\n            {props.rating}\n        </Typography>\n    );\n};\n\nexport default Rating;","// @flow \nimport {\n    Box,\n    FormControl,\n    FormControlLabel,\n    FormControlLabelProps,\n    FormControlProps,\n    FormHelperText,\n    FormLabel,\n    Radio,\n    RadioGroup,\n} from '@material-ui/core';\n\nimport * as React from 'react';\nimport Rating from '../../../components/Rating';\n\ninterface RatingFieldProps {\n   value: string | null;\n   setValue: (value) => void;\n   disabled?: boolean;\n   errors: any;\n   formControlProps: FormControlProps\n};\n\nconst ratings: FormControlLabelProps[] = [\n    {value: 'L', control: <Radio color=\"primary\"/>, label: <Rating rating={'L'}/>, labelPlacement: 'top'},\n    {value: '10', control: <Radio color=\"primary\"/>, label: <Rating rating={'10'}/>, labelPlacement: 'top'},\n    {value: '12', control: <Radio color=\"primary\"/>, label: <Rating rating={'12'}/>, labelPlacement: 'top'},\n    {value: '14', control: <Radio color=\"primary\"/>, label: <Rating rating={'14'}/>, labelPlacement: 'top'},\n    {value: '16', control: <Radio color=\"primary\"/>, label: <Rating rating={'16'}/>, labelPlacement: 'top'},\n    {value: '18', control: <Radio color=\"primary\"/>, label: <Rating rating={'18'}/>, labelPlacement: 'top'},\n];\n\nconst RatingField: React.FC<RatingFieldProps> = (props) => {\n    const { value, setValue, disabled, errors } = props;\n\n    return (\n        <FormControl\n                error={errors !== undefined}\n                disabled={disabled === true}\n                {...props.formControlProps}\n            >\n                <FormLabel component={\"legend\"}>Classificacao</FormLabel>\n                <Box paddingTop={1}>\n                    <RadioGroup\n                        name=\"rating\"\n                        onChange={(e) => {\n                            setValue(e.target.value);\n                        }}\n                        value={value}\n                        row\n                    >\n                        {\n                            ratings.map(\n                                (props, key) => <FormControlLabel key={key} {...props}/>\n                            )\n                        }\n                    </RadioGroup>\n                </Box>\n                \n                {\n                    errors &&\n                    <FormHelperText>{errors.message}</FormHelperText>\n                }\n            </FormControl>\n    );\n};\n\nexport default RatingField;","// @flow \nimport React, { RefAttributes, useImperativeHandle, useState } from 'react';\nimport { InputAdornment, TextField, TextFieldProps } from '@material-ui/core';\n\nexport interface InputFileProps extends RefAttributes<InputFileComponent>{\n    ButtonFile: React.ReactNode;\n    InputFileProps?: React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>;\n    TextFieldProps?: TextFieldProps;\n};\n\nexport interface InputFileComponent {\n    openWindow: () => void;\n    clear: () => void;\n}\n\nconst InputFile = React.forwardRef<InputFileComponent, InputFileProps>((props, ref) => {\n    const fileRef = React.useRef() as React.MutableRefObject<HTMLInputElement>;\n    const [filename, setFilename] = useState('');\n\n    const textFieldProps: TextFieldProps = {\n        variant: \"outlined\",\n        ...props.TextFieldProps,\n        InputProps: {\n            ...(\n                props.TextFieldProps && props.TextFieldProps.InputProps &&\n                {...props.TextFieldProps.InputProps}\n            ),\n            readOnly: true,\n            endAdornment: (\n                <InputAdornment position=\"start\">\n                    {props.ButtonFile}\n                </InputAdornment>\n            ),\n        },\n        value: filename,\n    };\n\n    const inputFileProps = {\n\n        hidden: true,\n        ref: fileRef,\n        onChange(event) {\n            const files = event.target.files;\n            if (files.length) {\n                console.log(files);\n                setFilename(Array.from(files).map((file: any) => file.name).join(', '));\n            }\n            if (props.InputFileProps && props.InputFileProps.onChange) {\n                props.InputFileProps.onChange(event);\n            }\n        },\n    };\n\n    useImperativeHandle(ref, () => ({\n        openWindow: () => fileRef.current.click(),\n        clear: () => setFilename(\"\")\n    }));\n\n    return (\n        <>\n            <input type=\"file\" {...inputFileProps} />\n            <TextField {...textFieldProps} />\n        </>\n    );\n});\n\nexport default InputFile;","// @flow \nimport React, {useImperativeHandle} from 'react';\nimport {\n    Button,\n    FormControl,\n    FormControlProps,\n} from '@material-ui/core';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport InputFile, {InputFileComponent} from '../../../components/InputFile';\n\ninterface UploadFieldProps {\n    accept: string;\n    label: string;\n    setValue: (value) => void;\n    disabled?: boolean;\n    errors?: any;\n    formControlProps?: FormControlProps\n};\n\nexport interface UploadFieldComponent {\n    clear: () => void;\n}\n\nconst UploadField = React.forwardRef<UploadFieldComponent, UploadFieldProps>((props, ref) => {\n\n    const fileRef = React.useRef() as React.MutableRefObject<InputFileComponent>;\n    const { accept, label, setValue, disabled, errors } = props;\n\n    useImperativeHandle(ref, () => ({\n        clear: () => fileRef.current.clear()\n    }))\n\n    return (\n        <FormControl\n            error={errors !== undefined}\n            disabled={disabled === true}\n            fullWidth\n            margin={'normal'}\n            {...props.formControlProps}\n        >\n            <InputFile\n                ref={fileRef}\n                TextFieldProps={{\n                    label: label,\n                    InputLabelProps: {shrink: true},\n                    style: {backgroundColor: '#ffffff'}\n                }}\n                InputFileProps={{\n                    accept,\n                    onChange(event) {\n                        const files = event.target.files as any;\n                        files.length && setValue(files[0]);\n                    }\n                }}\n                ButtonFile={\n                    <Button\n                        endIcon={<CloudUploadIcon />}\n                        variant={'contained'}\n                        color={'primary'}\n                        onClick={() => {\n                            fileRef.current.openWindow()\n                         }}\n                    > Adicionar </Button>\n                }\n            />\n        </FormControl>\n    );\n});\n\nexport default UploadField;","/* eslint-disable no-mixed-operators */\n// @flow \nimport { CircularProgress, TextField, TextFieldProps } from '@material-ui/core';\nimport { Autocomplete, AutocompleteProps, UseAutocompleteSingleProps } from '@material-ui/lab';\nimport { useSnackbar } from 'notistack';\nimport React, { RefAttributes, useEffect, useImperativeHandle, useState } from 'react';\nimport { useDebounce } from 'use-debounce/lib';\n\ninterface AsyncAutocompleteProps extends RefAttributes<AsyncAutocompleteProps>{\n    fetchOptions: (searchText) => Promise<any>;\n    debounceTime?: number;\n    TextFieldProps?: TextFieldProps;\n    AutoCompleteProps?: Omit<AutocompleteProps<any>, 'renderInput'> & UseAutocompleteSingleProps<any>;\n};\n\nexport interface AsyncAutocompleteComponent {\n    clear: () => void;\n}\nconst AsyncAutocomplete = React.forwardRef<AsyncAutocompleteComponent, AsyncAutocompleteProps> ((props, ref) => {\n\n    const {AutoCompleteProps, debounceTime = 300, fetchOptions} = props;\n    const {onOpen, onClose, onInputChange, freeSolo} = AutoCompleteProps as any;\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const snackbar = useSnackbar();\n    const [open, setOpen] = useState(false);\n    const [searchText, setSearText] = useState('');\n    const [debouncedSearchText] = useDebounce(searchText, debounceTime);\n    const [loading, setLoading] = useState(false);\n    const [options, setOptions] = useState([]);\n\n    const TextFieldProps: TextFieldProps = {\n        margin: 'normal',\n        variant: 'outlined',\n        fullWidth: true,\n        InputLabelProps: { shrink: true },\n        ...(props.TextFieldProps && { ...props.TextFieldProps })\n    }\n\n    const autocompleteProps: AutocompleteProps<any> = {\n        loadingText: 'Carregando...',\n        noOptionsText: 'Nenhum item encontrado',\n        loading: loading,\n        inputValue: searchText,\n        ...(props.AutoCompleteProps && { ...props.AutoCompleteProps }),\n        open,\n        options,\n        onOpen() {\n            setOpen(true);\n            onOpen && onOpen();\n        },\n        onClose() {\n            setOpen(false);\n            onClose && onClose();\n        },\n        onInputChange(event, value) {\n            setSearText(value);\n            onInputChange && onInputChange();\n        },\n        renderInput: params => (\n            <TextField\n                {...params}\n                {...TextFieldProps}\n                InputProps={{\n                    ...params.InputProps,\n                    endAdornment: (\n                        <>\n                            {loading && <CircularProgress color={'inherit'} size={20} />}\n                            {params.InputProps.endAdornment}\n                        </>\n                    )\n                }}\n            />\n        )\n    };\n\n    useEffect(() => {\n        if (!open && !freeSolo) {\n            setOptions([]);\n        }\n    },[open, freeSolo])\n\n    useEffect(() => {\n        if (!open) {\n            return;\n        }\n        if (debouncedSearchText === \"\" && freeSolo) {\n            return;\n        }\n        let isSubscribed = true;\n        (async () => {\n            setLoading(true);\n            try {\n                const data = await fetchOptions(debouncedSearchText);\n                if (isSubscribed) {\n                    setOptions(data);\n                }\n            } finally{\n                setLoading(false);\n            }\n        })();\n    }, [freeSolo, debouncedSearchText, open, fetchOptions]);\n\n    useImperativeHandle(ref, () => ({\n        clear: () => {\n            setSearText('');\n            setOptions([]);\n        }\n    }));\n\n    return (\n        <Autocomplete\n            {...autocompleteProps}\n        />\n    );\n});\n\nexport default AsyncAutocomplete;","import * as React from 'react';\nimport {createStyles, Grid, makeStyles, Theme} from \"@material-ui/core\";\nimport {GridProps} from \"@material-ui/core/Grid\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        root: {\n            backgroundColor: '#f1f1f1',\n            borderRadius: '4px',\n            padding: theme.spacing(1, 1),\n            color: theme.palette.secondary.main\n        },\n    }),\n);\n\ninterface GridSelectedProps extends GridProps {\n\n}\n\nexport const GridSelected: React.FC<GridSelectedProps> = (props) => {\n    const classes = useStyles();\n    return <Grid container wrap={\"wrap\"} className={classes.root} {...props}>\n        {props.children}\n    </Grid>\n};\n\nexport default GridSelected;\n","// @flow\nimport * as React from 'react';\nimport {Grid, IconButton} from \"@material-ui/core\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport {GridProps} from \"@material-ui/core/Grid\";\n\ninterface GridSelectedItemProps extends GridProps {\n    onDelete: () => void\n}\n\nexport const GridSelectedItem: React.FC<GridSelectedItemProps> = (props) => {\n    const {onDelete, children, ...other} = props;\n    return <Grid item {...other}>\n        <Grid container alignItems={\"center\"} spacing={3}>\n            <Grid item xs={1}>\n                <IconButton size={\"small\"} color={\"inherit\"} onClick={onDelete}>\n                    <DeleteIcon/>\n                </IconButton>\n            </Grid>\n            <Grid item xs={10} md={11}>\n                {children}\n            </Grid>\n        </Grid>\n    </Grid>\n};\n\nexport default GridSelectedItem;\n","import { useSnackbar } from \"notistack\";\n\nconst useCollectionManager = (collection: any[], setCollection: (item) => void) => {\n    const snackbar = useSnackbar();\n\n    return {\n        addItem(item) {\n            if (!item || item === \"\") {\n                return;\n            }\n            const exists = collection.find(i => i.id === item.id);\n            if (exists) {\n                snackbar.enqueueSnackbar(\n                    'Item ja adicionado', { variant: 'info' }\n                )\n                return;\n            }\n            collection.unshift(item);\n            setCollection(collection);\n        },\n        removeItem(item) {\n            const index = collection.findIndex(i => i.id === item.id);\n            if (index === -1) {\n                return;\n            }\n            collection.splice(index, 1);\n            setCollection(collection);\n        }\n\n    }\n};\n\nexport default useCollectionManager;","import axios from \"axios\";\nimport { useSnackbar } from \"notistack\";\nimport { useCallback } from \"react\";\n\nconst useHttpHandled = () => {\n    const {enqueueSnackbar} = useSnackbar();\n    return useCallback(\n        async (request: Promise<any>) => {\n            try {\n                const { data } = await request;\n                return data;\n            } catch (error) {\n                console.log(error);\n                if (!axios.isCancel(error)) {\n                    enqueueSnackbar(\n                        'Nao foi possível carregar as informações', { variant: 'error' }\n                    );\n                }\n                throw error;\n            }\n        }, [enqueueSnackbar]\n    )\n}\n\nexport default useHttpHandled;","import { Category, Genre } from \"./models\";\n\nexport function getGenresFromCategory(genres: Genre[], category: Category) {\n    \n    return genres.filter(\n        genre => genre.categories.filter(cat => cat.id === category.id).length !== 0\n    )\n}","// @flow \nimport { FormControl, FormControlProps, FormHelperText, Typography } from '@material-ui/core';\nimport React, {MutableRefObject, RefAttributes, useImperativeHandle, useRef} from 'react';\nimport AsyncAutocomplete, { AsyncAutocompleteComponent } from '../../../components/AsyncAutocomplete';\nimport GridSelected from '../../../components/GridSelected';\nimport { GridSelectedItem } from '../../../components/GridSelectedItem';\nimport useCollectionManager from '../../../hooks/useCollectionManager';\nimport useHttpHandled from '../../../hooks/useHttpHandled';\nimport genreHttp from '../../../util/http/genre-http';\nimport { getGenresFromCategory } from '../../../util/model-filters';\nimport { Category } from '../../../util/models';\n\ninterface GenreFieldProps extends RefAttributes<GenreFieldProps>{\n    genres: any[];\n    setGenres: (genres) => void;\n    error: any;\n    categories: Category[];\n    setCategories: (categories) => void;\n    disabled?: boolean;\n    FormControlProps?: FormControlProps\n};\n\nexport interface GenreFieldComponent {\n    clear: () => void;\n}\n\nconst GenreField = React.forwardRef<GenreFieldComponent, GenreFieldProps>((props, ref) => {\n    const { \n            genres, \n            setGenres, \n            error, \n            disabled,\n            categories,\n            setCategories,\n        } = props;\n    const { addItem, removeItem } = useCollectionManager(genres, setGenres);\n    const { removeItem: removeCategory } = useCollectionManager(categories, setCategories);\n    const autocompleteHttp = useHttpHandled();\n    const autocompleteRef = useRef() as MutableRefObject<AsyncAutocompleteComponent>;\n\n    const fetchOptions = (searchText) => autocompleteHttp(\n        genreHttp.list({\n            queryParams: {\n                search: searchText,\n                all: ''\n            },\n        })\n    )\n        .then((data) => data.data)\n        .catch((error) => console.log(error));\n\n    useImperativeHandle(ref, () => ({\n        clear: () => autocompleteRef.current.clear()\n    }));\n\n    return (\n        <>\n            <AsyncAutocomplete\n                ref={autocompleteRef}\n                fetchOptions={fetchOptions}\n                AutoCompleteProps={{\n                    autoSelect: true,\n                    clearOnEscape: true,\n                    freeSolo: true,\n                    //getOptionSelected: (option, value) => option.id === value.id,\n                    getOptionLabel: option => option.name,\n                    onChange: (event, value) => addItem(value),\n                    disabled: disabled,\n                }}\n                TextFieldProps={{\n                    label: 'Generos',\n                    error: error !== undefined\n                }}\n            />\n            <FormHelperText style={{height: '24px'}}>\n                Escolha os géneros do video\n            </FormHelperText>\n            <FormControl\n                margin={'normal'}\n                fullWidth\n                error={error !== undefined}\n                disabled={disabled}\n                {...props.FormControlProps}\n            >\n                <GridSelected>\n                    {\n                        genres.map((genre, key) => (\n                            <GridSelectedItem key={key} \n                                onDelete={ \n                                    () => {\n                                        const categoriesWithOneGenre = categories\n                                            .filter(category => {\n                                                const genresFromCategory = getGenresFromCategory(genre, category);\n                                                return genresFromCategory.length === 1 && genresFromCategory[0].id === genre.id\n                                            });\n                                        categoriesWithOneGenre.forEach(cat =>  removeCategory(cat));\n                                        removeItem(genre);\n                                    }\n                                } \n                            xs={12}>\n                                <Typography>{genre.name}</Typography>\n                            </GridSelectedItem>\n                        ))\n                    }\n\n                </GridSelected>\n                {\n                    error && <FormHelperText>{error.message}</FormHelperText>\n                }\n            </FormControl>\n\n        </>\n    );\n});\n\nexport default GenreField;","// @flow \nimport { FormControl, FormControlProps, FormHelperText, makeStyles, Theme, Typography } from '@material-ui/core';\nimport { grey } from '@material-ui/core/colors';\nimport React, {MutableRefObject, RefAttributes, useImperativeHandle, useRef} from 'react';\nimport AsyncAutocomplete, { AsyncAutocompleteComponent } from '../../../components/AsyncAutocomplete';\nimport GridSelected from '../../../components/GridSelected';\nimport { GridSelectedItem } from '../../../components/GridSelectedItem';\nimport useCollectionManager from '../../../hooks/useCollectionManager';\nimport useHttpHandled from '../../../hooks/useHttpHandled';\nimport categoryHttp from '../../../util/http/category-http';\nimport { getGenresFromCategory } from '../../../util/model-filters';\nimport { Genre } from '../../../util/models';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    genresSubtitle: {\n        color: grey[\"800\"],\n        fontSize: '0.8rem'\n    }\n}))\n\ninterface CategoryFieldProps extends RefAttributes<CategoryFieldProps>{\n    categories: any[];\n    setCategories: (categories) => void;\n    genres: Genre[];\n    error: any;\n    disabled?: boolean;\n    FormControlProps?: FormControlProps\n};\n\nexport interface CategoryFieldComponent {\n    clear: () => void;\n}\nconst CategoryField = React.forwardRef<CategoryFieldComponent, CategoryFieldProps>((props, ref) => {\n\n    const classes = useStyles();\n    const autocompleteHttp = useHttpHandled();\n    const { categories, setCategories, genres, error, disabled } = props;\n    const { addItem, removeItem } = useCollectionManager(categories, setCategories);\n    const autocompleteRef = useRef() as MutableRefObject<AsyncAutocompleteComponent>;\n\n    function fetchOptions(searchText) {\n        return autocompleteHttp(\n            categoryHttp\n                .list({\n                    queryParams: {\n                        genres: genres.map(genre => genre.id).join(','),\n                        all: \"\"\n                    }\n                })\n        ).then(data => data.data)\n    };\n\n    useImperativeHandle(ref, () => ({\n        clear: () => autocompleteRef.current.clear()\n    }));\n\n    return (\n        <>\n            <AsyncAutocomplete\n                ref={autocompleteRef}\n                fetchOptions={fetchOptions}\n                AutoCompleteProps={{\n                    autoSelect: true,\n                    clearOnEscape: true,\n                    freeSolo: false,\n                    getOptionLabel: option => option.name,\n                    onChange: (event, value) => addItem(value),\n                    disabled: disabled === true || !genres.length\n                }}\n                TextFieldProps={{\n                    label: 'Categorias',\n                    error: error !== undefined\n                }}\n            />\n            <FormHelperText style={{height: '24px'}}>\n                Escolha pelo menos uma categoria de cada género\n            </FormHelperText>\n            <FormControl\n                margin={'normal'}\n                fullWidth\n                error={error !== undefined}\n                disabled={disabled}\n                {...props.FormControlProps}\n            >\n                <GridSelected>\n                    {\n                        categories.map((category, key) => {\n                            const genresFromCategory = getGenresFromCategory(genres, category)\n                                .map(genre => genre.name)\n                                .join(',');\n                            return (\n                                <GridSelectedItem \n                                    key={key} \n                                    onDelete={\n                                        () => removeItem(category)} \n                                        xs={12}\n                                >\n                                    <Typography noWrap={true}>{category.name}</Typography>\n                                    <Typography noWrap={true} className={classes.genresSubtitle}>\n                                        Genero: {genresFromCategory}\n                                    </Typography>\n                                </GridSelectedItem>\n                            )\n                        })\n                    }\n\n                </GridSelected>\n                {\n                    error && <FormHelperText>{error.message}</FormHelperText>\n                }\n            </FormControl>\n        </>\n    );\n});\n\nexport default CategoryField;","// @flow \nimport React, {RefAttributes, useImperativeHandle, useRef, MutableRefObject, useCallback} from 'react';\nimport { FormControl, FormControlProps, FormHelperText, Typography } from '@material-ui/core';\nimport AsyncAutocomplete, { AsyncAutocompleteComponent } from '../../../components/AsyncAutocomplete';\nimport GridSelected from '../../../components/GridSelected';\nimport { GridSelectedItem } from '../../../components/GridSelectedItem';\nimport useCollectionManager from '../../../hooks/useCollectionManager';\nimport useHttpHandled from '../../../hooks/useHttpHandled';\nimport castMemberHttp from '../../../util/http/cast-member-http';\n\ninterface CastMemberFieldProps extends RefAttributes<CastMemberFieldProps>{\n    castMembers: any[];\n    setCastMembers: (castMembers) => void;\n    error: any;\n    disabled?: boolean;\n    FormControlProps?: FormControlProps\n};\n\nexport interface CastMemberFieldComponent {\n    clear: () => void;\n}\nconst CastMemberField = React.forwardRef<CastMemberFieldComponent, CastMemberFieldProps>((props, ref) => {\n\n    const autocompleteHttp = useHttpHandled();\n    const { castMembers, setCastMembers, error, disabled } = props;\n    const { addItem, removeItem } = useCollectionManager(castMembers, setCastMembers);\n    const autocompleteRef = useRef() as MutableRefObject<AsyncAutocompleteComponent>;\n\n    const fetchOptions = useCallback((searchText) => {\n        return autocompleteHttp(\n            castMemberHttp\n                .list({\n                    queryParams: {\n                        search: searchText, all: \"\"\n                    }\n                })\n        ).then(data => data.data)\n    }, [autocompleteHttp])\n\n    useImperativeHandle(ref, () => ({\n        clear: () => autocompleteRef.current.clear()\n    }));\n\n    return (\n        <>\n            <AsyncAutocomplete\n                ref={autocompleteRef}\n                fetchOptions={fetchOptions}\n                AutoCompleteProps={{\n                    autoSelect: true,\n                    clearOnEscape: true,\n                    freeSolo: false,\n                    getOptionLabel: option => option.name,\n                    onChange: (event, value) => addItem(value),\n                    disabled: disabled,\n                }}\n                TextFieldProps={{\n                    label: 'Cast-Member',\n                    error: error !== undefined\n                }}\n            />\n            <FormControl\n                margin={'normal'}\n                fullWidth\n                error={error !== undefined}\n                disabled={disabled}\n                {...props.FormControlProps}\n            >\n                <GridSelected>\n                    {\n                        castMembers.map((castMember, key) => {\n\n                            return (\n                                <GridSelectedItem \n                                    key={key} \n                                    onDelete={\n                                        () => removeItem(castMember)\n                                    } \n                                    xs={6}\n                                >\n                                    <Typography noWrap={true}>{castMember.name}</Typography>\n                                </GridSelectedItem>\n                            )\n                        })\n                    }\n\n                </GridSelected>\n                {\n                    error && <FormHelperText>{error.message}</FormHelperText>\n                }\n            </FormControl>\n        </>\n    );\n});\n\nexport default CastMemberField;","import { useSnackbar } from \"notistack\"\nimport { useEffect } from \"react\";\n\nconst useSnackbarFormError = (submitCount, errors) => {\n    const {enqueueSnackbar} = useSnackbar();\n    useEffect(() => {\n        const hasError = Object.keys(errors).length !== 0;\n        if (submitCount > 0 && hasError) {\n            enqueueSnackbar(\n                'Formulário invalido. Reveja os campos marcados de vermelhos',\n                { variant: 'error'}\n            )\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [submitCount, errors, enqueueSnackbar])\n};\n\nexport default useSnackbarFormError;","import { FileUpload, Upload } from \"./types\";\n\nexport function countInProgress(uploads: Upload[]) {\n    return uploads.filter(upload => !isFinished(upload)).length;\n}\n\nexport function isFinished(obj: Upload | FileUpload) {\n    return obj.progress === 1 || hasError(obj);\n}\n\nexport function hasError(obj: Upload | FileUpload): boolean {\n    if(isUploadType(obj)) {\n        const upload = obj as Upload;\n        return upload.files.some(file => file.error);\n    } else {\n        const file = obj as FileUpload;\n        return file.error !== undefined;\n    }\n}\n\nexport function isUploadType(obj: Upload | FileUpload) {\n    return 'video' in obj;\n}","// @flow \nimport * as React from 'react';\nimport { CircularProgress, Fade, makeStyles, Theme } from '@material-ui/core';\nimport { grey } from '@material-ui/core/colors';\nimport { FileUpload, Upload } from '../store/upload/types';\nimport { hasError } from '../store/upload/getters';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    progressContainer: {\n        position: 'relative',\n    },\n    progress: {\n        position: 'absolute',\n        left: 0\n    },\n    progressBackground: {\n        color: grey[\"300\"],\n    }\n}));\n\ninterface UploadProgressProps {\n    size: number;\n    uploadOrFile: Upload | FileUpload;\n};\nconst UploadProgress: React.FC<UploadProgressProps> = (props) => {\n    const classes = useStyles();\n    const { size, uploadOrFile } = props;\n    const error = hasError(uploadOrFile);\n    \n    return (\n        <Fade in={uploadOrFile.progress < 1} timeout={{ enter: 100, exit: 2000 }}>\n            <div className={classes.progressContainer}>\n                <CircularProgress\n                    variant=\"determinate\"\n                    value={100}\n                    className={classes.progressBackground}\n                    size={size}\n                />\n                <CircularProgress\n                    variant=\"determinate\"\n                    value={error ? 0 : uploadOrFile.progress * 100}\n                    className={classes.progress}\n                    size={size}\n                />\n            </div>\n        </Fade>\n\n    );\n};\n\nexport default UploadProgress;","import { createActions, createReducer } from 'reduxsauce';\nimport * as Typings from './types';\nimport update from 'immutability-helper';\n\nexport const { Types, Creators } = createActions<{\n    ADD_UPLOAD: string,\n    REMOVE_UPLOAD: string,\n    UPDATE_PROGRESS: string,\n    SET_UPLOAD_ERROR: string,\n}, {\n    addUpload(payload: Typings.AddUploadAction['payload']): Typings.AddUploadAction\n    removeUpload(payload: Typings.RemoveUploadAction['payload']): Typings.RemoveUploadAction\n    updateProgress(payload: Typings.UpdateProgressAction['payload']): Typings.UpdateProgressAction\n    setUploadError(payload: Typings.SetUploadErrorAction['payload']): Typings.SetUploadErrorAction\n}>({\n    addUpload: ['payload'],\n    removeUpload: ['payload'],\n    updateProgress: ['payload'],\n    setUploadError: ['payload']\n});\n\nexport const INITIAL_STATE: Typings.UploadState = {\n    uploads: []\n}\n\nconst reducer = createReducer<Typings.UploadState, Typings.Actions>(INITIAL_STATE, {\n    [Types.ADD_UPLOAD]: addUpload as any,\n    [Types.REMOVE_UPLOAD]: removeUpload as any,\n    [Types.UPDATE_PROGRESS]: updateProgress as any,\n    [Types.SET_UPLOAD_ERROR]: setUploadError as any,\n\n});\n\nexport default reducer;\n\nfunction addUpload(state = INITIAL_STATE, action: Typings.AddUploadAction): Typings.UploadState {\n    if (!action.payload.files.length) {\n        return state;\n    }\n    const index = findIndexUpload(state, action.payload.video.id);\n\n    if (index !== -1 && state.uploads[index].progress < 1) {\n        return state;\n    }\n\n    const uploads = index === -1 \n        ? state.uploads \n        : update(state.uploads, {\n            $splice: [[index, 1]]\n        });\n\n    return {\n        uploads: [\n            ...uploads,\n            {\n                video: action.payload.video,\n                progress: 0,\n                files: action.payload.files.map(file => ({\n                    fileField: file.fileField,\n                    filename: file.file.name,\n                    progress: 0\n                }))\n            }\n        ]\n    };\n}\n\nfunction removeUpload(state: Typings.UploadState = INITIAL_STATE, action: Typings.RemoveUploadAction): Typings.UploadState {\n    const uploads = state.uploads.filter(upload => upload.video.id !== action.payload.id);\n    if (uploads.length === state.uploads.length) {\n        return state;\n    }\n    return {\n        uploads\n    }\n}\n\nfunction updateProgress(state: Typings.UploadState = INITIAL_STATE, action: Typings.UpdateProgressAction): Typings.UploadState {\n\n    const videoId = action.payload.video.id;\n    const fileField = action.payload.fileField;\n    const { indexUpload, indexFile } = findIndexUploadAndFiles(state, videoId, fileField);\n\n    if (typeof indexUpload === 'undefined') {\n        return state;\n    }\n\n    const upload = state.uploads[indexUpload];\n    const file = upload.files[indexFile];\n\n    if(file.progress === action.payload.progress) {\n        return state;\n    }\n    const uploads = update(state.uploads, {\n        [indexUpload]: {\n            $apply(upload) {\n                const files = update(upload.files, {\n                    [indexFile]: {\n                        $set: { ...file, progress: action.payload.progress }\n                    }\n                });\n                const progress = calculateGlobalProgress(files);\n                return { ...upload, progress, files }\n            }\n        }\n    });\n\n    return { uploads }\n}\n\nfunction setUploadError(state: Typings.UploadState = INITIAL_STATE, action: Typings.SetUploadErrorAction): Typings.UploadState {\n    \n    const videoId = action.payload.video.id;\n    const fileField = action.payload.fileField;\n    const { indexUpload, indexFile } = findIndexUploadAndFiles(state, videoId, fileField);\n\n    if (typeof indexUpload === 'undefined') {\n        return state;\n    }\n\n    const upload = state.uploads[indexUpload];\n    const file = upload.files[indexFile];\n\n    const uploads = update(state.uploads, {\n        [indexUpload]: {\n            files: {\n                [indexFile]: {\n                    $set: {...file, error: action.payload.error, progress: 1}\n                }\n            }\n        }\n    });\n\n    return { uploads }\n}\n\nfunction findIndexUploadAndFiles(state: Typings.UploadState, videoId, fileField): { indexUpload?, indexFile?} {\n    const indexUpload = findIndexUpload(state, videoId);\n    if (indexUpload === -1) {\n        return {};\n    }\n    const upload = state.uploads[indexUpload];\n\n    const indexFile = findIndexFiles(upload.files, fileField);\n    return indexFile === -1 ? {} : { indexUpload, indexFile };\n}\n\nfunction calculateGlobalProgress(files: Array<{ progress }>) {\n    const countFiles = files.length;\n    if (!countFiles) {\n        return 0;\n    }\n    const sumProgress = files.reduce((sum, file) => sum + file.progress, 0);\n\n    return sumProgress / countFiles;\n}\n\nfunction findIndexUpload(state: Typings.UploadState, id: string) {\n    return state.uploads.findIndex((upload) => upload.video.id === id);\n}\n\nfunction findIndexFiles(files: Array<{ fileField }>, fileField: string) {\n    return files.findIndex(file => file.fileField === fileField);\n}","import * as React from \"react\";\r\nimport {Fade, IconButton, ListItemSecondaryAction, makeStyles, Theme} from \"@material-ui/core\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport ErrorIcon from \"@material-ui/icons/Error\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport {Upload} from \"../../store/upload/types\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {Creators} from '../../store/upload';\r\nimport {hasError, isFinished} from \"../../store/upload/getters\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {useDebounce} from \"use-debounce\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    successIcon: {\r\n        color: theme.palette.success.main\r\n    },\r\n    errorIcon: {\r\n        color: theme.palette.error.main\r\n    },\r\n}));\r\n\r\ninterface UploadActionProps {\r\n    upload: Upload;\r\n    hover: boolean;\r\n}\r\n\r\nconst UploadAction: React.FC<UploadActionProps> = (props) => {\r\n    const {upload, hover} = props;\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n    const error = hasError(upload);\r\n    const [show, setShow] = useState(false);\r\n    const [debouncedShow] = useDebounce(show, 2500);\r\n\r\n    useEffect(() => {\r\n        setShow(isFinished(upload))\r\n    }, [upload]);\r\n\r\n    return (\r\n        debouncedShow\r\n            ? (<Fade in={show} timeout={{enter: 1000}}>\r\n                    <ListItemSecondaryAction>\r\n                <span hidden={hover}>\r\n                    {\r\n                        upload.progress === 1 && !error && (\r\n                            <IconButton className={classes.successIcon} edge={\"end\"}>\r\n                                <CheckCircleIcon/>\r\n                            </IconButton>\r\n                        )\r\n                    }\r\n                    {\r\n                        error && (\r\n                            <IconButton className={classes.errorIcon} edge={\"end\"}>\r\n                                <ErrorIcon/>\r\n                            </IconButton>\r\n                        )\r\n                    }\r\n                </span>\r\n                        <span hidden={!hover}>\r\n                    <IconButton\r\n                        color={'primary'}\r\n                        edge={\"end\"}\r\n                        onClick={() => dispatch(Creators.removeUpload({id: upload.video.id}))}\r\n                    >\r\n                        <DeleteIcon/>\r\n                    </IconButton>\r\n                </span>\r\n                    </ListItemSecondaryAction>\r\n                </Fade>\r\n            )\r\n            : null\r\n    )\r\n};\r\n\r\nexport default UploadAction;\r\n","import * as React from \"react\";\r\nimport {\r\n    Divider,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    makeStyles,\r\n    Theme, Tooltip,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport MovieIcon from \"@material-ui/icons/Movie\";\r\nimport UploadProgress from \"../UploadProgress\";\r\nimport UploadAction from \"./UploadAction\";\r\nimport {Upload} from \"../../store/upload/types\";\r\nimport {hasError} from \"../../store/upload/getters\";\r\nimport {useState} from \"react\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    listItem: {\r\n        paddingTop: '7px',\r\n        paddingBottom: '7px',\r\n        height: '53px'\r\n    },\r\n    movieIcon: {\r\n        color: theme.palette.error.main,\r\n        minWidth: '40px'\r\n    },\r\n    listItemText: {\r\n        marginLeft: '6px',\r\n        marginRight: '24px',\r\n        color: theme.palette.text.secondary\r\n    },\r\n}));\r\n\r\ninterface UploadItemProps {\r\n    upload: Upload;\r\n}\r\n\r\nconst UploadItem: React.FC<UploadItemProps> = (props) => {\r\n    const {upload} = props;\r\n    const classes = useStyles();\r\n    const error = hasError(upload);\r\n    const [itemHover, setItemHover] = useState(false);\r\n    return (\r\n        <>\r\n            <Tooltip\r\n                disableFocusListener\r\n                disableTouchListener\r\n                title={\r\n                   error ? \"Não foi possível fazer o upload, clique para mais detalhes\" : \"\"\r\n                }\r\n                placement={\"left\"}\r\n            >\r\n                <ListItem\r\n                    className={classes.listItem}\r\n                    button\r\n                    onMouseOver={() => setItemHover(true)}\r\n                    onMouseLeave={() => setItemHover(false)}\r\n                >\r\n                    <ListItemIcon className={classes.movieIcon}>\r\n                        <MovieIcon/>\r\n                    </ListItemIcon>\r\n                    <ListItemText\r\n                        className={classes.listItemText}\r\n                        primary={\r\n                            <Typography noWrap={true} variant={'subtitle2'} color={\"inherit\"}>\r\n                                {upload.video.title}\r\n                            </Typography>\r\n                        }\r\n                    />\r\n                    <UploadProgress size={30} uploadOrFile={upload}/>\r\n                    <UploadAction upload={upload} hover={itemHover}/>\r\n                </ListItem>\r\n            </Tooltip>\r\n            <Divider component=\"li\"/>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default UploadItem;\r\n","import * as React from 'react';\r\nimport {\r\n    Card,\r\n    CardActions,\r\n    Collapse,\r\n    IconButton,\r\n    List, Theme,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport {useSnackbar} from \"notistack\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport {useState} from \"react\";\r\nimport classnames from \"classnames\";\r\nimport UploadItem from \"./UploadItem\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {Upload, UploadModule} from \"../../store/upload/types\";\r\nimport {countInProgress} from \"../../store/upload/getters\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    card: {\r\n        width: 450,\r\n    },\r\n    cardActionRoot: {\r\n        padding: '8px 8px 8px 16px',\r\n        backgroundColor: theme.palette.primary.main,\r\n    },\r\n    title: {\r\n        fontWeight: 'bold',\r\n        color: theme.palette.primary.contrastText,\r\n    },\r\n    icons: {\r\n        marginLeft: 'auto !important',\r\n        color: theme.palette.primary.contrastText,\r\n    },\r\n    expand: {\r\n        transform: 'rotate(0deg)',\r\n        transition: theme.transitions.create('transform', {\r\n            duration: theme.transitions.duration.shortest\r\n        })\r\n    },\r\n    expandOpen: {\r\n        transform: 'rotate(180deg)',\r\n        transition: theme.transitions.create('transform', {\r\n            duration: theme.transitions.duration.shortest\r\n        })\r\n    },\r\n    list: {\r\n        paddingTop: 0,\r\n        paddingBottom: 0\r\n    }\r\n}));\r\n\r\ninterface SnackbarUploadProps {\r\n    id: string | number;\r\n}\r\n\r\nconst SnackbarUpload = React.forwardRef<any, SnackbarUploadProps>((props, ref) => {\r\n\r\n    const {id} = props;\r\n    const classes = useStyles();\r\n    const {closeSnackbar} = useSnackbar();\r\n    const [expanded, setExpanded] = useState(true);\r\n\r\n    const uploads = useSelector<UploadModule, Upload[]>(\r\n        (state) => state.upload.uploads\r\n    );\r\n\r\n    const totalInProgress = countInProgress(uploads);\r\n\r\n    return (\r\n        <Card ref={ref} className={classes.card}>\r\n            <CardActions classes={{root: classes.cardActionRoot}}>\r\n                <Typography variant=\"subtitle2\" className={classes.title}>\r\n                    Fazendo upload de {totalInProgress} vídeo(s)\r\n                </Typography>\r\n                <div className={classes.icons}>\r\n                    <IconButton\r\n                        color={\"inherit\"}\r\n                        onClick={() => setExpanded(!expanded)}\r\n                        className={classnames(classes.expand, {[classes.expandOpen]: !expanded})}\r\n                    >\r\n                        <ExpandMoreIcon/>\r\n                    </IconButton>\r\n                    <IconButton\r\n                        color={\"inherit\"}\r\n                        onClick={() => closeSnackbar(id)}\r\n                    >\r\n                        <CloseIcon/>\r\n                    </IconButton>\r\n                </div>\r\n            </CardActions>\r\n            <Collapse in={expanded}>\r\n                <List className={classes.list}>\r\n                    {\r\n                        uploads.map((upload, key) => (\r\n                            <UploadItem key={key} upload={upload}/>\r\n                        ))\r\n                    }\r\n                </List>\r\n            </Collapse>\r\n        </Card>\r\n    );\r\n});\r\n\r\nexport default SnackbarUpload;\r\n","import * as React from 'react';\nimport {\n    Card, CardContent,\n    Checkbox,\n    FormControlLabel,\n    Grid, makeStyles,\n    TextField, Theme,\n    Typography,\n    useMediaQuery,\n    useTheme\n} from \"@material-ui/core\";\nimport {useForm} from \"react-hook-form\";\nimport videoHttp from \"../../../util/http/video-http\";\nimport * as yup from '../../../util/vendor/yup';\nimport {createRef, MutableRefObject, useCallback, useContext, useEffect, useRef, useState} from \"react\";\nimport {useParams, useHistory} from \"react-router\";\nimport {useSnackbar} from \"notistack\";\nimport {Video, VideoFileFieldsMap} from \"../../../util/models\";\nimport SubmitActions from \"../../../components/SubmitActions\";\nimport RatingField from \"./RatingField\";\nimport UploadField from \"./UploadField\";\nimport GenreField, {GenreFieldComponent} from \"./GenreField\";\nimport CategoryField, {CategoryFieldComponent} from \"./CategoryField\";\nimport CastMemberField, {CastMemberFieldComponent} from \"./CastMemberField\";\nimport {omit, zipObject} from 'lodash';\nimport {InputFileComponent} from \"../../../components/InputFile\";\nimport useSnackbarFormError from \"../../../hooks/useSnackbarFormError\";\nimport LoadingContext from \"../../../components/loading/LoadingContext\";\nimport SnackbarUpload from \"../../../components/SnackbarUpload\";\nimport {useDispatch} from \"react-redux\";\nimport {FileInfo} from \"../../../store/upload/types\";\nimport {Creators} from '../../../store/upload';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport DefaultForm from '../../../components/DafaultForm';\nimport { IUserRouteParams } from '../../../util/models/interfaces';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    cardUpload: {\n        borderRadius: \"4px\",\n        backgroundColor: \"#f5f5f5\",\n        margin: theme.spacing(2, 0)\n    },\n    cardOpened: {\n        borderRadius: \"4px\",\n        backgroundColor: \"#f5f5f5\",\n    },\n    cardContentOpened: {\n        paddingBottom: theme.spacing(2) + 'px !important'\n    },\n}));\n\nconst validationSchema = yup.object().shape({\n    title: yup.string()\n        .label('Título')\n        .required()\n        .max(255),\n    description: yup.string()\n        .label('Sinopse')\n        .required(),\n    year_launched: yup.number()\n        .label('Ano de lançamento')\n        .required()\n        .min(1),\n    duration: yup.number()\n        .label('Duração')\n        .required()\n        .min(1),\n    cast_members: yup.array()\n        .label('Elenco')\n        .required(),\n    genres: yup.array()\n        .label('Géneros')\n        .required()\n        .test({\n            message: 'Cada género escolhido precisa ter pelo menos uma categoria selecionada',\n            test(value: any) {\n                return value.every(v => v.categories.filter(\n                    cat => this.parent.categories.map(c => c.id).includes(cat.id)\n                ).length !== 0)\n            }\n        }),\n    categories: yup.array()\n        .label('Categorias')\n        .required(),\n    rating: yup.string()\n        .label('Classificação')\n        .required()\n});\n\nconst fileFields = Object.keys(VideoFileFieldsMap);\n//['thumb_file', 'banner_file']\n//[{current: undefined}, {}]\n//{'thumb_file': ref1, 'banner_file': ref2}\n//connect\n//mapStateToProps\nexport const Form = () => {\n    const {\n        register,\n        handleSubmit,\n        getValues,\n        setValue,\n        errors,\n        reset,\n        watch,\n        trigger,\n        formState\n    } = useForm<{\n        title,\n        description,\n        year_launched,\n        duration,\n        rating,\n        cast_members,\n        genres,\n        categories,\n        opened\n    }>({\n        resolver: yupResolver(validationSchema),\n        defaultValues: {\n            rating: null,\n            cast_members: [],\n            genres: [],\n            categories: [],\n            opened: false,\n        }\n    });\n\n    useSnackbarFormError(formState.submitCount, errors);\n    const classes = useStyles();\n    const {enqueueSnackbar} = useSnackbar();\n    const history = useHistory();\n    const {id} = useParams<IUserRouteParams>();\n    const [video, setVideo] = useState<Video | null>(null);\n    const loading = useContext(LoadingContext);\n    const theme = useTheme();\n    const isGreaterMd = useMediaQuery(theme.breakpoints.up('md'));\n    const castMemberRef = useRef() as MutableRefObject<CastMemberFieldComponent>;\n    const genreRef = useRef() as MutableRefObject<GenreFieldComponent>;\n    const categoryRef = useRef() as MutableRefObject<CategoryFieldComponent>;\n    const uploadsRef = useRef(\n        zipObject(fileFields, fileFields.map(() => createRef()))\n    ) as MutableRefObject<{ [key: string]: MutableRefObject<InputFileComponent> }>;\n\n    const dispatch = useDispatch();\n    //instancia mapa Google Maps\n\n    //ref pode ou não useState\n    const resetForm = useCallback((data) => {\n        Object.keys(uploadsRef.current).forEach(\n            field => uploadsRef.current[field].current.clear()\n        );\n        castMemberRef.current.clear();\n        genreRef.current.clear();\n        categoryRef.current.clear();\n        reset(data);//removido\n    }, [castMemberRef, categoryRef, genreRef, reset, uploadsRef]);\n\n    useEffect(() => {\n        [\n            'rating',\n            'opened',\n            'cast_members',\n            'genres',\n            'categories',\n            ...fileFields\n        ].forEach(name => register({name}));\n    }, [register]);\n\n    useEffect(() => {\n        if (!id) {\n            return;\n        }\n        let isSubscribed = true;\n        //iife\n        (async () => {\n            try {\n                const {data} = await videoHttp.get(id);\n                if (isSubscribed) {\n                    setVideo(data.data);\n                    resetForm(data.data);\n                }\n            } catch (error) {\n                console.error(error);\n                enqueueSnackbar(\n                    'Não foi possível carregar as informações',\n                    {variant: 'error',}\n                )\n            }\n        })();\n        return () => {\n            isSubscribed = false;\n        }\n    }, [id, resetForm, enqueueSnackbar]);\n\n    async function onSubmit(formData, event) {\n        const sendData = omit(\n            formData,\n            [...fileFields, 'cast_members', 'genres', 'categories']\n        );\n        sendData['cast_members_id'] = formData['cast_members'].map(cast_member => cast_member.id);\n        sendData['categories_id'] = formData['categories'].map(category => category.id);\n        sendData['genres_id'] = formData['genres'].map(genre => genre.id);\n\n        try {\n            const http = !video\n                ? videoHttp.create(sendData)\n                : videoHttp.update(video.id, sendData);\n            const {data} = await http;\n            enqueueSnackbar(\n                'Vídeo salvo com sucesso',\n                {variant: 'success'}\n            );\n            uploadFiles(data.data);\n            id && resetForm(video);\n            setTimeout(() => {\n                event\n                    ? (\n                        id\n                            ? history.replace(`/videos/${data.data.id}/edit`)\n                            : history.push(`/videos/${data.data.id}/edit`)\n                    )\n                    : history.push('/videos')\n            });\n        } catch (error) {\n            console.error(error);\n            enqueueSnackbar(\n                'Não foi possível salvar o vídeo',\n                {variant: 'error'}\n            )\n        }\n    }\n\n    function uploadFiles(video) {\n        const files: FileInfo[] = fileFields\n            .filter(fileField => getValues()[fileField])\n            .map(fileField => ({fileField, file: getValues()[fileField] as File}));\n\n        if (!files.length) {\n            return;\n        }\n\n        dispatch(Creators.addUpload({video, files}));\n\n        enqueueSnackbar('', {\n            key: 'snackbar-upload',\n            persist: true,\n            anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'right'\n            },\n            content: (key, message) => {\n                const id = key as any;\n                return <SnackbarUpload id={id}/>\n            }\n        });\n    }\n\n    return (\n        <DefaultForm\n            GridItemProps={{xs: 12}}\n            onSubmit={handleSubmit(onSubmit)}\n        >\n            <Grid container spacing={5}>\n                <Grid item xs={12} md={6}>\n                    <TextField\n                        name=\"title\"\n                        label=\"Título\"\n                        variant={'outlined'}\n                        fullWidth\n                        inputRef={register}\n                        disabled={loading}\n                        InputLabelProps={{shrink: true}}\n                        error={errors.title !== undefined}\n                        helperText={errors.title && errors.title.message}\n                    />\n                    <TextField\n                        name=\"description\"\n                        label=\"Sinopse\"\n                        multiline\n                        rows=\"4\"\n                        margin=\"normal\"\n                        variant=\"outlined\"\n                        fullWidth\n                        inputRef={register}\n                        disabled={loading}\n                        InputLabelProps={{shrink: true}}\n                        error={errors.description !== undefined}\n                        helperText={errors.description && errors.description.message}\n                    />\n                    <Grid container spacing={1}>\n                        <Grid item xs={6}>\n                            <TextField\n                                name=\"year_launched\"\n                                label=\"Ano de lançamento\"\n                                type=\"number\"\n                                margin=\"normal\"\n                                variant=\"outlined\"\n                                fullWidth\n                                inputRef={register}\n                                disabled={loading}\n                                InputLabelProps={{shrink: true}}\n                                error={errors.year_launched !== undefined}\n                                helperText={errors.year_launched && errors.year_launched.message}\n                            />\n                        </Grid>\n                        <Grid item xs={6}>\n                            <TextField\n                                name=\"duration\"\n                                label=\"Duração\"\n                                type=\"number\"\n                                margin=\"normal\"\n                                variant=\"outlined\"\n                                fullWidth\n                                inputRef={register}\n                                disabled={loading}\n                                InputLabelProps={{shrink: true}}\n                                error={errors.duration !== undefined}\n                                helperText={errors.duration && errors.duration.message}\n                            />\n                        </Grid>\n                    </Grid>\n                    <CastMemberField\n                        ref={castMemberRef}\n                        castMembers={watch('cast_members')}\n                        setCastMembers={(value) => setValue('cast_members', value)}\n                        error={errors.cast_members}\n                        disabled={loading}\n                    />\n                    <Grid container spacing={2}>\n                        <Grid item xs={12} md={6}>\n                            <GenreField\n                                ref={genreRef}\n                                genres={watch('genres')}\n                                setGenres={(value) => setValue('genres', value)}\n                                categories={watch('categories')}\n                                setCategories={(value) => setValue('categories', value)}\n                                error={errors.genres}\n                                disabled={loading}\n                            />\n                        </Grid>\n                        <Grid item xs={12} md={6}>\n                            <CategoryField\n                                ref={categoryRef}\n                                categories={watch('categories')}\n                                setCategories={(value) => setValue('categories', value)}\n                                genres={watch('genres')}\n                                error={errors.categories}\n                                disabled={loading}\n                            />\n                        </Grid>\n                    </Grid>\n\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <RatingField\n                        value={watch('rating')}\n                        setValue={(value) => setValue('rating', value)}\n                        errors={errors.rating}\n                        disabled={loading}\n                        formControlProps={{\n                            margin: isGreaterMd ? 'none' : 'normal'\n                        }}\n                    />\n                    <Card className={classes.cardUpload}>\n                        <CardContent>\n                            <Typography color=\"primary\" variant=\"h6\">\n                                Imagens\n                            </Typography>\n                            <UploadField\n                                ref={uploadsRef.current['thumb_file']}\n                                accept={'image/*'}\n                                label={'Thumb'}\n                                setValue={(value) => setValue('thumb_file', value)}\n                            />\n                            <UploadField\n                                ref={uploadsRef.current['banner_file']}\n                                accept={'image/*'}\n                                label={'Banner'}\n                                setValue={(value) => setValue('banner_file', value)}\n                            />\n                        </CardContent>\n                    </Card>\n                    <Card className={classes.cardUpload}>\n                        <CardContent>\n                            <Typography color=\"primary\" variant=\"h6\">\n                                Videos\n                            </Typography>\n                            <UploadField\n                                ref={uploadsRef.current['trailer_file']}\n                                accept={'video/mp4'}\n                                label={'Trailer'}\n                                setValue={(value) => setValue('trailer_file', value)}\n                            />\n                            <UploadField\n                                ref={uploadsRef.current['video_file']}\n                                accept={'video/mp4'}\n                                label={'Principal'}\n                                setValue={(value) => {\n                                    setValue('video_file', value)\n                                    console.log(getValues());\n                                }}\n                            />\n                        </CardContent>\n                    </Card>\n                    <Card className={classes.cardOpened}>\n                        <CardContent className={classes.cardContentOpened}>\n                            <FormControlLabel\n                                control={\n                                    <Checkbox\n                                        name=\"opened\"\n                                        color={'primary'}\n                                        onChange={\n                                            () => setValue('opened', !getValues()['opened'])\n                                        }\n                                        checked={watch('opened')}\n                                        disabled={loading}\n                                    />\n                                }\n                                label={\n                                    <Typography color=\"primary\" variant={\"subtitle2\"}>\n                                        Quero que este conteúdo apareça na seção lançamentos\n                                    </Typography>\n                                }\n                                labelPlacement=\"end\"\n                            />\n                        </CardContent>\n                    </Card>\n                </Grid>\n            </Grid>\n            <SubmitActions\n                disabledButtons={loading}\n                handleSave={() =>\n                    trigger().then(isValid => {\n                        isValid && onSubmit(getValues(), null)\n                    })\n                }\n            />\n        </DefaultForm>\n    );\n};\n","// @flow \nimport * as React from 'react';\nimport { useParams } from 'react-router';\nimport { Page } from '../../components/Page';\nimport { IUserRouteParams } from '../../util/models/interfaces';\nimport { Form } from './Form';\n\nconst PageForm = () => {\n    const { id } = useParams<IUserRouteParams>();\n    return (\n        <Page title={ !id ? 'Criar video': 'Editar video'}>\n            <Form/>\n        </Page>\n    );\n};\n\nexport default PageForm;","// @flow \nimport * as React from 'react';\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@material-ui/core';\n\ntype DeleteDialogProps = {\n    open: boolean;\n    handleClose: (confirmed: boolean) => void;\n};\nexport const DeleteDialog: React.FC<DeleteDialogProps> = ({open, handleClose}) => {\n\n    return (\n        <Dialog\n            open={open}\n            onClose={() => handleClose(false)}\n        >\n            <DialogTitle>\n                Exclusão de registros\n            </DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    Deseja realmente excluir este(s) registro(s)?\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={() => handleClose(false)} color=\"primary\">\n                    Cancelar\n                </Button>\n                <Button onClick={() => handleClose(true)} color=\"primary\" autoFocus>\n                    Excluir\n                </Button>\n            </DialogActions>\n\n        </Dialog>\n    );\n};","import { useEffect, useState } from \"react\"\n\nconst useDeleteCollection = () => {\n    const [openDeleteDialog, setOpenDeleteDialog] = useState(false);\n    const [rowsToDelete, setRowsToDelete] = useState<{\n        lookup: { [dataIndex: number]: boolean };\n        data: Array<{ index: number; dataIndex: number }>}>({lookup: {}, data: []});\n\n    useEffect(() => {\n        if (rowsToDelete.data.length) {\n            setOpenDeleteDialog(true);\n        }\n    }, [rowsToDelete]);\n\n    return {\n        openDeleteDialog, setOpenDeleteDialog, rowsToDelete, setRowsToDelete\n    }\n}\n\nexport default useDeleteCollection;","/* eslint-disable react-hooks/exhaustive-deps */\n// @flow \nimport React, { useContext, useEffect, useRef, useState } from 'react';\n\nimport format from 'date-fns/format';\nimport parseISO from 'date-fns/parseISO';\nimport { ListResponse, Video } from '../../util/models';\nimport DefaultTable, { makeActionStyle, TableColumn, MuiDataTableRefComponent } from '../../components/Table';\nimport { useSnackbar } from 'notistack';\nimport { IconButton, MuiThemeProvider } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { FilterResetButton } from '../../components/Table/FilterResetButton';\nimport useFilter from '../../hooks/useFilter';\nimport videoHttp from '../../util/http/video-http';\nimport { DeleteDialog } from '../../components/DeleteDialog';\nimport useDeleteCollection from '../../hooks/useDeleteCollection';\nimport LoadingContext from '../../components/loading/LoadingContext';\n\nconst columnsDefinition: TableColumn[] = [\n    {\n        name: 'id',\n        label: 'ID',\n        width: '30%',\n        options: {\n            sort: false,\n            filter: false\n        }\n    },\n    {\n        name: \"title\",\n        label: \"Título\",\n        width: '20%',\n        options: {\n            filter: false\n        }\n    },\n    {\n        name: \"genres\",\n        label: \"Gêneros\",\n        width: '13%',\n        options: {\n            sort: false,\n            filter: false,\n            customBodyRender: (value, tableMeta, updateValue) => {\n                return value.map(value => value.name).join(', ');\n            }\n        }\n    },\n    {\n        name: \"categories\",\n        label: \"Categorias\",\n        width: '12%',\n        options: {\n            sort: false,\n            filter: false,\n            customBodyRender: (value, tableMeta, updateValue) => {\n                return value.map(value => value.name).join(', ');\n            }\n        }\n    },\n    {\n        name: \"created_at\",\n        label: \"Criado em\",\n        width: '10%',\n        options: {\n            filter: false,\n            customBodyRender(value, tableMeta, updateValue) {\n                return <span>{format(parseISO(value), 'dd/MM/yyyy')}</span>\n            }\n        }\n    },\n    {\n        name: \"actions\",\n        label: \"Ações\",\n        width: '13%',\n        options: {\n            sort: false,\n            filter: false,\n            customBodyRender: (value, tableMeta) => {\n                return (\n                    <IconButton\n                        color={'secondary'}\n                        component={Link}\n                        to={`/videos/${tableMeta.rowData[0]}/edit`}\n                    >\n                        <EditIcon/>\n                    </IconButton>\n                )\n            }\n        }\n    }\n];\n\nconst debouncedTime = 300;\nconst debouncedSearchTime = 300;\nconst rowsPerPage = 15;\nconst rowsPerPageOptions = [15, 25, 50];\n\nconst Table = () => {\n\n    const snackbar = useSnackbar();\n    const subscribed = useRef(true);\n    const [data, setData] = useState<Video[]>([]);\n    const loading = useContext(LoadingContext);\n    const {openDeleteDialog, setOpenDeleteDialog, rowsToDelete, setRowsToDelete} = useDeleteCollection();\n    const tableRef = useRef() as React.MutableRefObject<MuiDataTableRefComponent>;\n\n    const {\n        columns,\n        filterManager,\n        cleanSearchText,\n        filterState,\n        debouncedFilterState,\n        totalRecords,\n        setTotalRecords,\n    } = useFilter({\n        columns: columnsDefinition,\n        debounceTime: debouncedTime,\n        rowsPerPage,\n        rowsPerPageOptions,\n        tableRef\n    });\n\n    useEffect(() => {\n        subscribed.current = true;\n        getData();\n        return () => {\n            subscribed.current = false;\n        }\n    }, [\n        cleanSearchText(debouncedFilterState.search),\n        debouncedFilterState.pagination.page,\n        debouncedFilterState.pagination.per_page,\n        debouncedFilterState.order,\n    ]);\n\n    async function getData() {\n        try {\n            const { data } = await videoHttp.list<ListResponse<Video>>({\n                queryParams: {\n                    search: cleanSearchText(filterState.search),\n                    page: filterState.pagination.page,\n                    per_page: filterState.pagination.per_page,\n                    sort: filterState.order.sort,\n                    dir: filterState.order.dir,\n                }\n            });\n            if (subscribed.current) {\n                setData(data.data);\n                setTotalRecords(data.meta.total);\n                if(openDeleteDialog) {\n                    setOpenDeleteDialog(false);\n                }\n            }\n        } catch (error) {\n            console.error(error);\n            if (videoHttp.isCancelledRequest(error)) {\n                return;\n            }\n            snackbar.enqueueSnackbar(\n                'Nao foi possível carregar as informações',\n                { variant: 'error' }\n            )\n        }\n    };\n\n    function deleteRows(confirmed: boolean) {\n        if (!confirmed) {\n            setOpenDeleteDialog(false);\n            return;\n        }\n        const ids = rowsToDelete\n            .data\n            .map((value) => data[value.index].id)\n            .join(',');\n        videoHttp\n            .deleteCollection({ids})\n            .then(response => {\n                snackbar.enqueueSnackbar(\n                    'Registros excluídos com sucesso',\n                    {variant: 'success'}\n                );\n                if (\n                    rowsToDelete.data.length === filterState.pagination.per_page\n                    && filterState.pagination.page > 1\n                ) {\n                    const page = filterState.pagination.page -2;\n                    filterManager.changePage(page);\n                } else {\n                    getData();\n                }\n            })\n            .catch((error) => {\n                console.log(error);\n                snackbar.enqueueSnackbar(\n                    'Nao foi possível excluir os registros',\n                    {variant: 'error'}\n                )\n            })\n    }\n\n    return (\n        <MuiThemeProvider theme={makeActionStyle(columnsDefinition.length - 1)}>\n            <DeleteDialog open={openDeleteDialog} handleClose={deleteRows} />\n            <DefaultTable\n                title=\"Listagem de videos\"\n                columns={columns}\n                data={data}\n                loading={loading}\n                debouncedSearchTime={debouncedSearchTime}\n                ref={tableRef}\n                options={\n                    {\n                        serverSide: true,\n                        responsive: \"scrollMaxHeight\",\n                        searchText: filterState.search as any,\n                        page: filterState.pagination.page - 1,\n                        rowsPerPage: filterState.pagination.per_page,\n                        rowsPerPageOptions,\n                        count: totalRecords,\n                        customToolbar: () => (\n                            <FilterResetButton\n                                handleClick={() => filterManager.resetFilter()}\n                            />\n                        ),\n                        onSearchChange: (value: any) => filterManager.changeSearch(value),\n                        onChangePage: (page: number) => filterManager.changePage(page),\n                        onChangeRowsPerPage: (perPage: number) => filterManager.changeRowsPerPage(perPage),\n                        onColumnSortChange: (changedColumn: string, direction: string) => filterManager.changeColumnSort(changedColumn, direction),\n                        onRowsDelete: (rowsDeleted) => {\n                            setRowsToDelete(rowsDeleted as any);\n                            return false\n                        }\n                    }\n                }\n            />\n        </MuiThemeProvider>\n    );\n};\n\nexport default Table;","// @flow \nimport * as React from 'react';\nimport { Box, Fab } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\nimport { Page } from '../../components/Page';\nimport { Add } from '@material-ui/icons';\nimport Table from './Table';\n\nconst PagList = () => {\n    return (\n       <Page title=\"Listagem videos\">\n           <Box dir={'rtl'} paddingBottom={2}>\n            <Fab\n                title=\"Adicionar video\"\n                color={'secondary'}\n                size=\"small\"\n                component={Link}\n                to=\"/videos/create\"\n            >\n                <Add/>\n            </Fab>\n           </Box>\n           <Box>\n               <Table/>\n           </Box>\n       </Page>\n    );\n};\n\nexport default PagList;","// @flow \nimport * as React from 'react';\nimport { Page } from '../components/Page';\n\ntype DashboardProps = {\n    \n};\nconst Dashboard = (props: DashboardProps) => {\n    return (\n        <Page title=\"Dashboard\">\n\n        </Page>\n    );\n};\n\nexport default Dashboard;","// @flow \nimport { Divider, Fade, IconButton, makeStyles, Theme } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { Link } from 'react-router-dom';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { FileUpload, Upload } from '../../store/upload/types';\nimport { useDispatch } from 'react-redux';\nimport { Creators } from '../../store/upload';\nimport { hasError, isFinished, isUploadType } from '../../store/upload/getters';\nimport { useDebounce } from 'use-debounce/lib';\n\nconst useStyles = makeStyles((theme: Theme) => {\n    return ({\n        successIcon: {\n            color: theme.palette.success.main,\n            marginLeft: theme.spacing(1)\n        },\n        errorIcon: {\n            color: theme.palette.error.main,\n            marginLeft: theme.spacing(1)\n        },\n        divider: {\n            height: '20px',\n            marginLeft: theme.spacing(1),\n            marginRight: theme.spacing(1)\n        }\n    })\n});\n\ninterface UploadActionProps {\n    uploadOrFile: Upload | FileUpload;\n};\nconst UploadAction: React.FC<UploadActionProps> = (props) => {\n    const classes = useStyles();\n    const { uploadOrFile } = props;\n    const dispatch = useDispatch();\n    const error = hasError(uploadOrFile);\n    const videoId = (uploadOrFile as any)?.video?.id;\n    const [show, setShow] = useState(false);\n    const activeActions = isUploadType(uploadOrFile);\n    const [debouncedShow] = useDebounce(show, 2500);\n\n    useEffect(() => {\n        setShow(isFinished(uploadOrFile))\n    }, [uploadOrFile]);\n\n\n    return (\n        debouncedShow ? (\n            <Fade in={true} timeout={{ enter: 1000 }}>\n                <>\n                    {\n                        uploadOrFile.progress === 1 && !error && <CheckCircleIcon className={classes.successIcon} />\n                    }\n                    {error && <ErrorIcon className={classes.errorIcon} />}\n\n                    {\n                        activeActions && (\n                            <>\n                                <Divider className={classes.divider} orientation={'vertical'} />\n                                <IconButton\n                                    onClick={() => dispatch(Creators.removeUpload({ id: videoId }))}\n                                >\n                                    <DeleteIcon color={'primary'} />\n                                </IconButton>\n                                <IconButton\n                                    component={Link}\n                                    to={`/videos/${videoId}/edit`}\n                                >\n                                    <EditIcon color={'primary'} />\n                                </IconButton>\n                            </>\n                        )\n                    }\n                </>\n            </Fade>\n        ) : null\n    );\n};\n\nexport default UploadAction;","// @flow \nimport * as React from 'react';\nimport MovieIcon from '@material-ui/icons/Movie';\nimport ImageIcon from '@material-ui/icons/Image';\nimport { Grid, ListItem, makeStyles, Theme, Typography } from '@material-ui/core';\nimport UploadProgress from '../../components/UploadProgress';\nimport UploadAction from './UploadAction';\nimport { FileUpload, Upload } from '../../store/upload/types';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    gridTitle: {\n        display: 'flex',\n        color: '#999999',\n    },\n    icon: {\n        color: theme.palette.error.main,\n        minWidth: '40px'\n    },\n}));\n\ninterface UploadItemProps {\n    uploadOrFile: Upload | FileUpload;\n};\nexport const UploadItem: React.FC<UploadItemProps> = (props) => {\n    const classes = useStyles();\n    const {uploadOrFile} = props;\n\n    function makeIcon() {\n        if (true) {\n            return <MovieIcon className={classes.icon}/>\n        }\n        return <ImageIcon className={classes.icon}/>\n    }\n\n    return (\n        <ListItem>\n            <Grid container alignItems={'center'}>\n                <Grid\n                    className={classes.gridTitle}\n                    item\n                    xs={12}\n                    md={9}\n                >\n                    {makeIcon()}\n                    <Typography color={'inherit'}>\n                        {props.children}\n                    </Typography>\n                </Grid>\n                <Grid item xs={12} md={3}>\n                    <Grid\n                        container\n                        direction={'row'}\n                        alignItems={'center'}\n                        justify={'flex-end'}\n                    >\n                        <UploadProgress size={48} uploadOrFile={uploadOrFile}/>\n                        <UploadAction uploadOrFile={uploadOrFile}/>\n                    </Grid>\n                </Grid>\n            </Grid>\n        </ListItem>\n    );\n};","// @flow \nimport {\n    Theme,\n    makeStyles,\n    CardContent,\n    Card,\n    ExpansionPanel,\n    ExpansionPanelSummary,\n    ExpansionPanelDetails,\n    Typography,\n    Grid,\n    Divider,\n    List\n} from '@material-ui/core';\nimport * as React from 'react';\nimport { Page } from '../../components/Page';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { UploadItem } from './UploadItem';\nimport { Upload, UploadModule } from '../../store/upload/types';\nimport { useSelector } from 'react-redux';\nimport { VideoFileFieldsMap } from '../../util/models';\n\nconst useStyles = makeStyles((theme: Theme) => {\n    return ({\n        panelSummary: {\n            backgroundColor: theme.palette.primary.main,\n            color: theme.palette.primary.contrastText\n        },\n        expandedIcon: {\n            color: theme.palette.primary.contrastText\n        }\n    })\n})\n\nconst Uploads = () => {\n    const classes = useStyles();\n    const uploads = useSelector<UploadModule, Upload[]>((state) => state.upload.uploads);\n\n    return (\n        <Page title={'Uploads'}>\n            {uploads.map((upload, key) => (\n                <Card elevation={5} key={key}>\n                    <CardContent>\n                        <UploadItem uploadOrFile={upload}>\n                            {upload.video.title}\n                        </UploadItem>\n                        <ExpansionPanel style={{ margin: '0px' }}>\n                            <ExpansionPanelSummary\n                                className={classes.panelSummary}\n                                expandIcon={<ExpandMoreIcon className={classes.expandedIcon} />}\n                            >\n                                <Typography>Ver detalhes</Typography>\n                            </ExpansionPanelSummary>\n                            <ExpansionPanelDetails style={{ padding: '0px' }}>\n                                <Grid item xs={12}>\n                                    <List style={{ padding: '0px' }}>\n                                        {\n                                            upload.files.map((file, key) => (\n                                                <React.Fragment key={key}>\n                                                    <Divider />\n                                                    <UploadItem uploadOrFile={file}>\n                                                        {`${VideoFileFieldsMap[file.fileField]} - ${file.filename}`}\n                                                    </UploadItem>\n                                                </React.Fragment>\n                                            ))\n                                        }\n\n                                    </List>\n                                </Grid>\n                            </ExpansionPanelDetails>\n                        </ExpansionPanel>\n                    </CardContent>\n                </Card>\n            ))}\n\n        </Page>\n    );\n};\n\n\nexport default Uploads;","import {RouteProps} from 'react-router-dom';\nimport CategoryList from '../pages/category/PagList';\nimport CategoryForm from '../pages/category/PageForm';\nimport GenreList from '../pages/genre/PageList';\nimport GenreForm from '../pages/genre/PageForm';\nimport CastMemberList from '../pages/cast-member/PageList';\nimport CastMemberForm from '../pages/cast-member/PageForm';\nimport VideoForm from '../pages/video/PageForm';\nimport VideoList from '../pages/video/PageList';\nimport Dashboard from '../pages/Dashboard';\nimport UploadPage from '../pages/uploads';\n\n\nexport interface MyRouteProps extends RouteProps {\n    name: string;\n    label: string;\n}\n\nconst routes: MyRouteProps[] = [\n    {\n        name: 'dashboard',\n        label: 'Dashboard',\n        path: '/',\n        component: Dashboard,\n        exact: true\n    }, \n    {\n        name: 'categories.list',\n        label: 'Listagem Categorias',\n        path: '/categories',\n        component: CategoryList,\n        exact: true\n    }, \n    {\n        name: 'categories.create',\n        label: 'Criar Categorias',\n        path: '/categories/create',\n        component: CategoryForm,\n        exact: true\n    }, \n    {\n        name: 'categories.edit',\n        label: 'Editar Categorias',\n        path: '/categories/:id/edit',\n        component: CategoryForm,\n        exact: true\n    },\n    {\n        name: 'genres.list',\n        label: 'Listagem Generos',\n        path: '/genres',\n        component: GenreList,\n        exact: true\n    }, \n    {\n        name: 'genres.create',\n        label: 'Criar Generos',\n        path: '/genres/create',\n        component: GenreForm,\n        exact: true\n    },\n    {\n        name: 'genres.edit',\n        label: 'Editar Generos',\n        path: '/genres/:id/edit',\n        component: GenreForm,\n        exact: true\n    },\n    {\n        name: 'cast_members.list',\n        label: 'Listagem Membros de elenco',\n        path: '/cast-members',\n        component: CastMemberList,\n        exact: true\n    }, \n    {\n        name: 'cast_members.create',\n        label: 'Criar Membros de elenco',\n        path: '/cast-members/create',\n        component: CastMemberForm,\n        exact: true\n    },\n    {\n        name: 'cast_members.edit',\n        label: 'Editar Membros de elenco',\n        path: '/cast-members/:id/edit',\n        component: CastMemberForm,\n        exact: true\n    },\n    {\n        name: 'videos.list',\n        label: 'Listagem Videos',\n        path: '/videos',\n        component: VideoList,\n        exact: true\n    }, \n    {\n        name: 'videos.create',\n        label: 'Criar Videos',\n        path: '/videos/create',\n        component: VideoForm,\n        exact: true\n    },\n    {\n        name: 'videos.edit',\n        label: 'Editar Videos',\n        path: '/videos/:id/edit',\n        component: VideoForm,\n        exact: true\n    },\n    {\n        name: 'uploads',\n        label: 'Uploads',\n        path: '/uploads',\n        component: UploadPage,\n        exact: true\n    }, \n]\n\nexport default routes;","// @flow \nimport * as React from 'react';\nimport { IconButton, Menu as MuiMenu, MenuItem } from '@material-ui/core';\nimport { MenuRounded } from '@material-ui/icons';\nimport routes, {MyRouteProps} from '../../routes';\nimport { Link } from 'react-router-dom';\n\nconst listRoutes = {\n    'dashboard': 'Dashboard',\n    'categories.list': 'Categories',\n    'cast_members.list': 'Membros de elenco',\n    'genres.list': 'Generos',\n    'videos.list': 'Videos',\n    'uploads': 'Uploads',\n};\n\nconst menuRoutes = routes.filter(route => Object.keys(listRoutes).includes(route.name));\n\nexport const Menu = () => {\n\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const open = Boolean(anchorEl);\n\n    const handleOpen = (event: any) => setAnchorEl(event.currentTarget);\n    const handleClose = () => setAnchorEl(null);\n\n    return (\n        <React.Fragment>\n            <IconButton\n                    edge=\"start\"\n                    color=\"inherit\"\n                    aria-label=\"open drawer\"\n                    aria-controls=\"menu-appbar\"\n                    aria-haspopup=\"true\"\n                    onClick={handleOpen}\n                >\n                    <MenuRounded />\n                </IconButton>\n                <MuiMenu\n                    id=\"menu-appbar\"\n                    open={open}\n                    anchorEl={anchorEl}\n                    onClose={handleClose}\n                    anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n                    transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n                    getContentAnchorEl={null}\n                >\n                    {\n                        Object.keys(listRoutes).map(\n                            (routeName, key) => {\n                            const route = menuRoutes.find(route => route.name === routeName) as MyRouteProps;\n                            return (\n                                <MenuItem key={key} component={Link} to={route.path as string} onClick={handleClose}>\n                                    {listRoutes[routeName]}\n                                </MenuItem>\n                            );\n                        })\n                    }\n                    \n                </MuiMenu>\n        </React.Fragment>\n    );\n};","import * as React from 'react';\nimport {\n    AppBar,\n    Button,\n    makeStyles,\n    Theme,\n    Toolbar,\n    Typography\n} from '@material-ui/core';\nimport logo from '../../static/img/logo.png';\nimport { Menu } from './Menu';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    toolbar: {\n        backgroundColor: '#000000'\n    },\n    title: {\n        flexGrow: 1,\n        textAlign: 'center'\n    },\n    logo: {\n        width: 100,\n        [theme.breakpoints.up('sm')]: {\n            width: 170\n        }\n    }\n}))\n\nexport const Navbar: React.FC = () => {\n    const classes = useStyles();\n\n    return (\n        <AppBar>\n            <Toolbar className={classes.toolbar}>\n                <Menu/>\n                <Typography className={classes.title}>\n                    <img src={logo} alt=\"CodeFlix\" className={classes.logo} />\n                </Typography>\n                <Button color=\"inherit\">Login</Button>\n            </Toolbar>\n        </AppBar>\n    );\n};","export default \"data:image/png;base64,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\"","// @flow \nimport * as React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport routes from '.';\n\nconst AppRoute = () => {\n    return (\n        <Switch>\n            {\n                routes.map((route, key) => (\n                    <Route\n                        key={key}\n                        path={route.path}\n                        component={route.component}\n                        exact={route.exact === true}\n                    />\n                ))\n            }\n        </Switch>\n    );\n};\n\nexport default AppRoute;","/* eslint-disable no-nested-ternary */\nimport React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\n\nimport Link, { LinkProps } from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport { Box, Breadcrumbs, Container } from '@material-ui/core';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\n\nimport RouteParser from 'route-parser';\nimport { Route } from 'react-router';\nimport { Location } from 'history';\nimport routes from '../routes';\n\nconst breadcrumbNameMap: { [key: string]: string } = {};\nroutes.forEach(route => breadcrumbNameMap[route.path as string] = route.label);\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    linkRouter: {\n      color: theme.palette.secondary.main,\n      \"&:focus, &:active\": {\n        color: theme.palette.secondary.main,\n      },\n      \"&:hover\" : {\n        color: theme.palette.secondary.dark\n      }\n    }\n  }),\n);\n\ninterface LinkRouterProps extends LinkProps {\n  to: string;\n  replace?: boolean;\n}\n\nconst LinkRouter = (props: LinkRouterProps) => <Link {...props} component={RouterLink as any} />;\n\nexport default function Breadcrumb() {\n  const classes = useStyles();\n\n  function makeBreadcrumb(location: Location) {\n    const pathnames = location.pathname.split('/').filter((x: string) => x);\n    pathnames.unshift('/');\n    \n    return (\n      <Breadcrumbs aria-label=\"breadcrumb\">\n        {pathnames.map((value: string, index: number) => {\n          const last = index === pathnames.length - 1;\n          const to = `${pathnames.slice(0, index + 1).join('/').replace('//', '/')}`;\n          const route = Object\n                          .keys(breadcrumbNameMap)\n                          .find(path => new RouteParser(path)\n                          .match(to));\n\n          if (route === undefined) {\n            return false;\n          }\n\n          return last ? (\n            <Typography color=\"textPrimary\" key={to}>\n              {breadcrumbNameMap[route]}\n            </Typography>\n          ) : (\n            <LinkRouter color=\"inherit\" to={to} key={to} className={classes.linkRouter}>\n              {breadcrumbNameMap[route]}\n            </LinkRouter>\n          );\n        })}\n      </Breadcrumbs>\n    );\n  }\n\n  return (\n\n    <Container maxWidth={'xl'}>\n      <Box paddingTop={2} paddingBottom={1}>\n      <Route>\n        {\n          ({location}: {location: Location}) => makeBreadcrumb(location)\n        }\n      </Route>\n      </Box>\n    </Container>\n  );\n}\n","// @flow \nimport { IconButton, makeStyles, Theme } from '@material-ui/core';\nimport { SnackbarProvider as NotistackProvider, SnackbarProviderProps } from 'notistack';\nimport * as React from 'react';\nimport CloseIcon from '@material-ui/icons/Close'\n\nconst useStyles = makeStyles((theme: Theme) => {\n    return {\n        variantSuccess: {\n            backgroundColor: theme.palette.success.main\n        },\n        variantError: {\n            backgroundColor: theme.palette.error.main\n        },\n        variantInfo: {\n            backgroundColor: theme.palette.primary.main\n        }\n    }\n})\nexport const SnackBarProvider: React.FC<SnackbarProviderProps> = (props) => {\n\n    let snackbarProviderRef;\n    const classes = useStyles();\n\n    const defaultProps: SnackbarProviderProps = {\n        children: props.children,\n        classes,\n        autoHideDuration: 3000,\n        maxSnack: 3,\n        anchorOrigin: {\n            horizontal: 'right',\n            vertical: 'top'\n        },\n        preventDuplicate: true,\n        ref: (el) => snackbarProviderRef = el,\n        action: (key) => (\n            <IconButton \n                color={'inherit'} \n                style={{fontSize: 20}}\n                onClick={() => snackbarProviderRef.closeSnackbar(key)}\n            >\n                <CloseIcon/>\n            </IconButton>\n        )\n    };\n\n    const newProps = { ...defaultProps, ...props};\n\n    return (\n        <NotistackProvider {...newProps}>\n            {props.children}\n        </NotistackProvider>\n    );\n};","// @flow \nimport React, { useContext } from 'react';\nimport { Fade, LinearProgress, MuiThemeProvider, Theme } from '@material-ui/core';\nimport LoadingContext from './loading/LoadingContext';\n\nfunction makeLocalTheme(theme: Theme): Theme {\n    return {\n        ...theme,\n        palette: {\n            ...theme.palette,\n            primary: theme.palette.error,\n            type: 'dark'\n        }\n    }\n}\n\nconst Spinner = () => {\n    const loading = useContext(LoadingContext);\n    return (\n        <MuiThemeProvider theme={makeLocalTheme}>\n            <Fade in={loading}>\n                <LinearProgress\n                    color={'primary'}\n                    style={{\n                        position: 'fixed',\n                        width: '100%',\n                        zIndex: 9999\n                    }}\n                />\n            </Fade>\n        </MuiThemeProvider>\n    );\n};\n\nexport default Spinner;","// @flow \nimport React, { useEffect, useMemo, useState } from 'react';\nimport LoadingContext from './LoadingContext';\nimport { addGlobalRequestInterceptor, addGlobalResponseInterceptor, removeGlobalRequestInterceptor, removeGlobalResponseInterceptor } from '../../util/http';\n\nconst LoadingProvider = ({ children }) => {\n    const [loading, setLoading] = useState<boolean>(false);\n    const [countRequest, setCountRequest] = useState(0);\n\n    useMemo(() => {\n        let isSubscribed = true;\n        const requestIds = addGlobalRequestInterceptor((config) => {\n            if (isSubscribed && !config.headers.hasOwnProperty('x-ignore-loading')) {\n                setLoading(true);\n                setCountRequest((prevCountRequest) => prevCountRequest + 1);\n            };\n            return config;\n        });\n        //axios.interceptors.request.use();\n        const responseIds = addGlobalResponseInterceptor(\n            (response) => {\n                if (isSubscribed && !response.config.headers.hasOwnProperty('x-ignore-loading')) {\n                    decrementCountRequest();\n                };\n                return response;\n            },\n            (error) => {\n                if (isSubscribed && !error.config.headers.hasOwnProperty('x-ignore-loading')) {\n                    decrementCountRequest();\n                };\n                return Promise.reject(error);\n            }\n        );\n        //axios.interceptors.response.use();\n        return () => {\n            isSubscribed = false;\n            removeGlobalRequestInterceptor(requestIds);\n            removeGlobalResponseInterceptor(responseIds);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [true]);\n\n    useEffect(() => {\n        if (!countRequest) {\n            setLoading(false);\n        }\n    }, [countRequest])\n\n    function decrementCountRequest() {\n        setCountRequest((prevCountRequest) => prevCountRequest - 1);\n    };\n\n\n    return (\n        <LoadingContext.Provider value={loading}>\n            {children}\n        </LoadingContext.Provider>\n    );\n};\n\nexport default LoadingProvider;","import React from 'react';\nimport './App.css';\nimport { Box, CssBaseline, MuiThemeProvider } from '@material-ui/core';\n\nimport { Navbar } from './components/Navbar';\nimport { BrowserRouter } from 'react-router-dom';\nimport AppRoute from './routes/AppRoute';\nimport Breadcrumb from './components/Breadcrumb';\nimport theme from './theme';\nimport { SnackBarProvider } from './components/SnackBarProvider';\nimport Spinner from './components/Spinner';\nimport LoadingProvider from './components/loading/LoadingProvider';\n\nfunction App() {\n  return (\n    <React.Fragment>\n      <LoadingProvider>\n        <MuiThemeProvider theme={theme}>\n          <SnackBarProvider>\n          <CssBaseline/>\n          <BrowserRouter basename=\"/admin\">\n            <Spinner />\n            <Navbar />\n            <Box paddingTop={'70px'}>\n              <Breadcrumb/>\n              <AppRoute />\n            </Box>\n          </BrowserRouter>\n          </SnackBarProvider>\n        </MuiThemeProvider>\n      </LoadingProvider>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { actionChannel, call, take, put } from \"redux-saga/effects\";\nimport { eventChannel, END } from \"@redux-saga/core\";\nimport videoHttp from \"../../util/http/video-http\";\nimport { Video } from \"../../util/models\";\nimport { Types, Creators } from \"./index\";\nimport { AddUploadAction, FileInfo } from \"./types\";\n\nexport function* uploadWatcherSaga() {\n    const newFilesChannel = yield actionChannel(Types.ADD_UPLOAD);\n\n    while (true) {\n        const { payload }: AddUploadAction = yield take(newFilesChannel);\n        for (const fileInfo of payload.files) {\n            try {\n                const response = yield call(uploadFile, { video: payload.video, fileInfo });\n                console.log(response);\n            } catch (error) {\n                console.log(error);\n            }\n        }\n        console.log('payload', payload);\n    }\n}\n\nfunction* uploadFile({ video, fileInfo }: { video: Video, fileInfo: FileInfo }) {\n    const channel = yield call(sendUpload, { id: video.id, fileInfo });\n    while (true) {\n        try {\n            const {progress, response} = yield take(channel);\n            if(response) {\n                return response;\n            }\n            yield put(Creators.updateProgress({\n                video,\n                fileField: fileInfo.fileField,\n                progress\n            }));\n        } catch (error) {\n            yield put(Creators.setUploadError({\n                video,\n                fileField: fileInfo.fileField,\n                error\n            }));\n            throw error;\n        }\n        \n    }\n}\n\nfunction sendUpload({ id, fileInfo }: { id: string, fileInfo: FileInfo }) {\n    return eventChannel(emitter => {\n        videoHttp.partialUpdate(id, {\n            _method: 'PATCH',\n            [fileInfo.fileField]: fileInfo.file\n        }, {\n            http: {\n                usePost: true\n            },\n            config: {\n                headers: {\n                    'x-ignore-loading': true\n                },\n                onUploadProgress(progressEvent: ProgressEvent) {\n                    if (progressEvent.lengthComputable) {\n                        const progress = progressEvent.loaded / progressEvent.total;\n                        emitter({progress})\n                    }\n                }\n            }\n        })\n        .then(response => emitter({response}))\n        .catch(error => emitter(error))\n        .finally(() => emitter(END));\n\n        const unsubscribe = () => { };\n        return unsubscribe;\n    })\n}","import {all} from 'redux-saga/effects';\nimport { uploadWatcherSaga } from './upload/sagas';\n\nexport default function* rootSaga() {\n    yield all([\n        uploadWatcherSaga()\n    ])\n}","import { createStore, applyMiddleware, combineReducers } from \"redux\";\nimport createSagaMiddleware from 'redux-saga';\nimport rootSaga from \"./root-saga\";\nimport upload from \"./upload\";\n\nconst sagaMiddleware = createSagaMiddleware();\nconst store = createStore(\n    combineReducers({\n        upload,\n    }),\n    applyMiddleware(sagaMiddleware)\n);\n\nsagaMiddleware.run(rootSaga);\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {Provider} from 'react-redux';\nimport store from './store';\n\nReactDOM.render(\n\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}